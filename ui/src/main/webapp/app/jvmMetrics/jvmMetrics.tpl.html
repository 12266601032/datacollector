<div class="panel panel-default page-panel jvm-metrics-page" ng-controller="GraphController">

  <div class="panel-heading clearfix">
    <div class="panel-title">
      <h3 translate="jvmMetrics.title">JVM Metrics</h3>
    </div>
  </div>

  <div class="panel-body">

    <div class="row">

      <div class="col-sm-4">
        <div class="panel panel-default">
          <div class="panel-heading" translate="jvmMetrics.memory.title">Memory</div>
          <div class="panel-body">

            <p>{{'jvmMetrics.memory.total' | translate}} ({{metrics.gauges['jvm.memory.total.used'].value / 1000000 | number:0}}M / {{metrics.gauges['jvm.memory.total.max'].value / 1000000 | number:0}}M)</p>
            <div class="progress">
              <div class="progress-bar progress-bar-success progress-bar-striped"
                   role="progressbar"
                   aria-valuenow="{{metrics.gauges['jvm.memory.total.used'].value / 1000000 | number:0}}"
                   aria-valuemin="0"
                   aria-valuemax="{{metrics.gauges['jvm.memory.total.max'].value / 1000000 | number:0}}"
                   style="width: {{metrics.gauges['jvm.memory.total.used'].value * 100 / metrics.gauges['jvm.memory.total.max'].value  | number:0}}%">
                {{metrics.gauges['jvm.memory.total.used'].value * 100 / metrics.gauges['jvm.memory.total.max'].value  | number:0}}%
              </div>
            </div>


            <p>{{'jvmMetrics.memory.heap' | translate}} ({{metrics.gauges['jvm.memory.heap.used'].value / 1000000 | number:0}}M / {{metrics.gauges['jvm.memory.heap.max'].value / 1000000 | number:0}}M)</p>

            <div class="progress">
              <div class="progress-bar progress-bar-success progress-bar-striped"
                   role="progressbar"
                   aria-valuenow="{{metrics.gauges['jvm.memory.heap.used'].value / 1000000 | number:0}}"
                   aria-valuemin="0"
                   aria-valuemax="{{metrics.gauges['jvm.memory.heap.max'].value / 1000000 | number:0}}"
                   style="width: {{metrics.gauges['jvm.memory.heap.usage'].value * 100 | number:0}}%">
                {{(metrics.gauges['jvm.memory.heap.usage'].value * 100 | number:0)}}%
              </div>
            </div>


            <p>{{'jvmMetrics.memory.nonheap' | translate}} ({{metrics.gauges['jvm.memory.non-heap.used'].value / 1000000 | number:0}}M / {{metrics.gauges['jvm.memory.non-heap.max'].value / 1000000 | number:0}}M)</p>

            <div class="progress">
              <div class="progress-bar progress-bar-success progress-bar-striped"
                   role="progressbar"
                   aria-valuenow="{{metrics.gauges['jvm.memory.non-heap.used'].value / 1000000 | number:0}}"
                   aria-valuemin="0"
                   aria-valuemax="{{metrics.gauges['jvm.memory.non-heap.max'].value / 1000000 | number:0}}"
                   style="width: {{metrics.gauges['jvm.memory.non-heap.usage'].value * 100 | number:0}}%">
                {{(metrics.gauges['jvm.memory.non-heap.usage'].value * 100 | number:0)}}%
              </div>
            </div>

          </div>
        </div>
      </div>


      <div class="col-sm-4">
        <div class="panel panel-default">
          <div class="panel-heading">
            <span translate="jvmMetrics.threads.title">Threads</span> (Total: {{metrics.gauges['jvm.threads.count'].value}}) <a class="hand" ng-click="threadDump()" data-toggle="modal" data-target="#threadDump"><i class="glyphicon glyphicon-eye-open"></i></a>
          </div>
          <div class="panel-body">

            <p>{{'jvmMetrics.threads.runnable' | translate}} {{metrics.gauges['jvm.threads.runnable.count'].value}}</p>
            <div class="progress progress-striped">
              <div class="progress-bar progress-bar-success" role="progressbar"
                   aria-valuenow="{{metrics.gauges['jvm.threads.runnable.count'].value}}"
                   aria-valuemin="0"
                   aria-valuemax="{{metrics.gauges['jvm.threads.count'].value}}"
                   style="width: {{metrics.gauges['jvm.threads.runnable.count'].value * 100 / metrics.gauges['jvm.threads.count'].value | number:0}}%">
                {{metrics.gauges['jvm.threads.runnable.count'].value * 100 / metrics.gauges['jvm.threads.count'].value | number:0}}%
              </div>
            </div>
            <p>{{'jvmMetrics.threads.timedwaiting' | translate}} ({{metrics.gauges['jvm.threads.timed_waiting.count'].value}})</p>
            <div class="progress progress-striped">
              <div class="progress-bar progress-bar-warning" role="progressbar"
                   aria-valuenow="{{metrics.gauges['jvm.threads.timed_waiting.count'].value}}"
                   aria-valuemin="0"
                   aria-valuemax="{{metrics.gauges['jvm.threads.count'].value}}"
                   style="width: {{metrics.gauges['jvm.threads.timed_waiting.count'].value * 100 / metrics.gauges['jvm.threads.count'].value | number:0}}%">
                {{metrics.gauges['jvm.threads.timed_waiting.count'].value * 100 / metrics.gauges['jvm.threads.count'].value | number:0}}%
              </div>
            </div>
            <p>{{'jvmMetrics.threads.waiting' | translate}} ({{metrics.gauges['jvm.threads.waiting.count'].value}})</p>
            <div class="progress progress-striped">
              <div class="progress-bar progress-bar-warning" role="progressbar"
                   aria-valuenow="{{metrics.gauges['jvm.threads.waiting.count'].value}}"
                   aria-valuemin="0"
                   aria-valuemax="{{metrics.gauges['jvm.threads.count'].value}}"
                   style="width: {{metrics.gauges['jvm.threads.waiting.count'].value * 100 / metrics.gauges['jvm.threads.count'].value | number:0}}%">
                {{metrics.gauges['jvm.threads.waiting.count'].value * 100 / metrics.gauges['jvm.threads.count'].value | number:0}}%
              </div>
            </div>
            <p>{{'jvmMetrics.threads.blocked' | translate}}  ({{metrics.gauges['jvm.threads.blocked.count'].value}})</p>
            <div class="progress progress-striped">
              <div class="progress-bar progress-bar-danger" role="progressbar"
                   aria-valuenow="{{metrics.gauges['jvm.threads.blocked.count'].value}}"
                   aria-valuemin="0"
                   aria-valuemax="{{metrics.gauges['jvm.threads.count'].value}}"
                   style="width: {{metrics.gauges['jvm.threads.blocked.count'].value * 100 / metrics.gauges['jvm.threads.count'].value | number:0}}%">
                {{metrics.gauges['jvm.threads.blocked.count'].value * 100 / metrics.gauges['jvm.threads.count'].value | number:0}}%
              </div>
            </div>

          </div>
        </div>
      </div>


      <div class="col-sm-4">
        <div class="panel panel-default">
          <div class="panel-heading" translate="jvmMetrics.gc.title">Garbage Collections</div>
          <div class="panel-body">

            <div class="row">
              <div class="col-md-9" translate="jvmMetrics.gc.marksweepcount">Mark Sweep count</div>
              <div class="col-md-3">{{metrics.gauges['jvm.garbage.PS-MarkSweep.count'].value}}</div>
            </div>
            <div class="row">
              <div class="col-md-9" translate="jvmMetrics.gc.marksweeptime">Mark Sweep time</div>
              <div class="col-md-3">{{metrics.gauges['jvm.garbage.PS-MarkSweep.time'].value}}ms</div>
            </div>
            <div class="row">
              <div class="col-md-9" translate="jvmMetrics.gc.scavengecount">Scavenge count</div>
              <div class="col-md-3">{{metrics.gauges['jvm.garbage.PS-Scavenge.count'].value}}</div>
            </div>
            <div class="row">
              <div class="col-md-9" translate="jvmMetrics.gc.scavengetime">Scavenge time</div>
              <div class="col-md-3">{{metrics.gauges['jvm.garbage.PS-Scavenge.time'].value}}ms</div>
            </div>

          </div>
        </div>
      </div>

    </div>


  </div>

</div>