<div class="panel panel-default metric-alert-rules-tab" ng-controller="MetricAlertRulesController">
  <div class="panel-heading clearfix">
    <span translate="home.detailPane.rulesTab.metricAlertRules">Metric Alert Rules</span>

    <button type="button" class="btn btn-primary btn-sm pull-right"
            ng-click="createMetricAlertRule()">
      <i class="fa fa-plus"></i> {{'global.form.add' | translate}}
    </button>
  </div>
  <div class="panel-body">
    <form class="form-horizontal" role="form"
          ng-class="{'form-group-sm': ($storage.displayDensity === pipelineConstant.DENSITY_COZY || $storage.displayDensity === pipelineConstant.DENSITY_COMPACT)}"
          name="{{detailPaneConfig.instanceName || 'pipeline'}}">

      <table class="table">
        <thead>
        <tr>
          <th class="alert-text-col">{{'home.detailPane.rulesTab.alertText' | translate}}</th>
          <th class="type-col">{{'home.detailPane.rulesTab.metricType' | translate}}</th>
          <th class="id-col">{{'home.detailPane.rulesTab.metricID' | translate}}</th>
          <th class="element-col">{{'home.detailPane.rulesTab.metricElement' | translate}}</th>
          <th class="condition-col">{{'home.detailPane.rulesTab.condition' | translate}}</th>
          <th class="enabled-col">{{'home.detailPane.rulesTab.enabled' | translate}}</th>
          <th>{{'global.form.actions' | translate}}</th>
        </tr>
        </thead>
        <tbody ng-hide="showLoading">

        <tr ng-repeat="alertRule in metricsAlertDefinitions = (pipelineRules.metricsAlertDefinitions) track by $index">

          <td>
            {{alertRule.label}}
          </td>

          <td>
            {{alertRule.metricType}}
          </td>

          <td>
            {{getMetricIdLabel(alertRule)}}
          </td>

          <td>
            {{getMetricElementLabel(alertRule)}}
          </td>

          <td class="expression-language">
            {{alertRule.condition}}
          </td>

          <td>
            <input type="checkbox" name="enabled{{$index}}"
                   ng-disabled="!alertRule.valid"
                   ng-model="alertRule.enabled">
          </td>

          <td>
            <a href="javascript:;" ng-click="editMetricAlertDataRule(alertRule, $index)">Edit</a>
            &nbsp;&nbsp;|&nbsp;&nbsp;
            <a href="javascript:;" ng-click="removeRule(pipelineRules.metricsAlertDefinitions, $index)">Delete</a>
          </td>

        </tr>

        <tr ng-if="metricsAlertDefinitions.length === 0">
          <td colspan="3" class="no-records text-center"
              translate="home.detailPane.rulesTab.noMetricAlertRules">No Metric Alert Rules to view.</td>
        </tr>

        </tbody>
      </table>

      <div show-loading="showLoading"></div>

    </form>

  </div>
</div>