<div class="panel panel-default page-panel home-page">

  <div class="panel-heading clearfix">

    <div class="panel-title ">
      <div class="pull-left">
        <button type="button" class="navbar-toggle collapsed"
                ng-if="activeConfigStatus.executionMode != pipelineConstant.SLAVE"
                ng-class="{'selected' : !hideLibraryPanel}"
                ng-click="toggleLibraryPanel()"
                title="{{'home.header.toggleLibraryPane' | translate}}">
          <i class="icon-bar"></i>
          <i class="icon-bar"></i>
          <i class="icon-bar"></i>
        </button>
      </div>
      <h3 class="pull-left" translate="packageManager.title">Package Manager</h3>
    </div>

    <div class="pull-right">

      <a ng-disabled="selectedStageLibraryList.length === 0"
         ng-if="isAuthorized([userRoles.admin])"
         ng-click="selectedStageLibraryList.length === 0 || onInstallSelectedLibrariesClick()"
         tooltip-placement="bottom"
         tooltip="{{('packageManager.header.install' | translate)  + ' (' + selectedStageLibraryList.length + ')'}}"
         tooltip-popup-delay="500"
         class="btn btn-link icon-button">
        <i class="fa fa-plus-square fa-14x"></i>
      </a>

      <a ng-disabled="selectedStageLibraryList.length === 0 || common.isSlaveNode"
         ng-if="isAuthorized([userRoles.admin])"
         ng-click="selectedStageLibraryList.length === 0 || onUninstallSelectedLibrariesClick()"
         tooltip-placement="bottom"
         tooltip="{{('packageManager.header.uninstall' | translate)  + ' (' + selectedStageLibraryList.length + ')'}}"
         tooltip-popup-delay="500"
         class="btn btn-link icon-button">
        <i class="fa fa-minus-square fa-14x"></i>
      </a>

    </div>

    <div class="pull-right" ng-show="pipelines.length > 1 && header.pipelineGridView">

      <span class="sort-by-label">Sort by:</span>
      <div class="btn-group pull-right sort-by-dropdown">

        <button class="btn btn-link dropdown-toggle icon-button" type="button" data-toggle="dropdown">
          <span>{{'home.sortColumn.' + header.sortColumn | translate}}</span>
          <i ng-show="!header.sortReverse" class="fa fa-arrow-down"></i>
          <i ng-show="header.sortReverse" class="fa fa-arrow-up"></i>
        </button>

        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1">

          <li role="presentation">
            <a role="menuitem" tabindex="-1" href="#"
               ng-click="header.sortColumn = 'name'; header.sortReverse = false">
              <span translate="home.sortColumn.name">Name</span>
              <i class="fa fa-arrow-down"></i>
            </a>
          </li>

          <li role="presentation">
            <a role="menuitem" tabindex="-1" href="#"
               ng-click="header.sortColumn = 'name'; header.sortReverse = true">
              <span translate="home.sortColumn.name">Name</span>
              <i class="fa fa-arrow-up"></i>
            </a>
          </li>

          <li role="presentation">
            <a role="menuitem" tabindex="-1" href="#"
               ng-click="header.sortColumn = 'created'; header.sortReverse = false">
              <span translate="home.sortColumn.created">Date created</span>
              <i class="fa fa-arrow-down"></i>
            </a>
          </li>

          <li role="presentation">
            <a role="menuitem" tabindex="-1" href="#"
               ng-click="header.sortColumn = 'created'; header.sortReverse = true">
              <span translate="home.sortColumn.created">Date created</span>
              <i class="fa fa-arrow-up"></i>
            </a>
          </li>

          <li role="presentation">
            <a role="menuitem" tabindex="-1" href="#"
               ng-click="header.sortColumn = 'lastModified'; header.sortReverse = false">
              <span translate="home.sortColumn.lastModified">Date updated</span>
              <i class="fa fa-arrow-down"></i>
            </a>
          </li>

          <li role="presentation">
            <a role="menuitem" tabindex="-1" href="#"
               ng-click="header.sortColumn = 'lastModified'; header.sortReverse = true">
              <span translate="home.sortColumn.lastModified">Date updated</span>
              <i class="fa fa-arrow-up"></i>
            </a>
          </li>

          <li role="presentation">
            <a role="menuitem" tabindex="-1" href="#"
               ng-click="header.sortColumn = 'status'; header.sortReverse = false">
              <span translate="home.sortColumn.status">Status</span>
              <i class="fa fa-arrow-down"></i>
            </a>
          </li>

          <li role="presentation">
            <a role="menuitem" tabindex="-1" href="#"
               ng-click="header.sortColumn = 'status'; header.sortReverse = true">
              <span translate="home.sortColumn.status">Status</span>
              <i class="fa fa-arrow-up"></i>
            </a>
          </li>

        </ul>
      </div>
    </div>

    <div class="pull-right">
      <div class="btn-group pipeline-search" >
        <input type="search" class="form-control" placeholder="Type to search"
               ng-model="header.searchInput"
               ng-change="updateStageLibraryList()">
      <span class="glyphicon glyphicon-remove-circle search-clear"
            ng-click="header.searchInput = '';updateStageLibraryList();"></span>
      </div>
    </div>

    <div class="pull-right pipelines-count">
      <span ng-if="limit >= filteredStageLibraries.length">{{filteredStageLibraries.length}} {{filteredStageLibraries.length > 1 ? 'Libraries' : 'Library'}}</span>
      <span ng-if="limit < filteredStageLibraries.length">{{limit}} of {{filteredStageLibraries.length}} {{filteredStageLibraries.length > 1 ? 'Libraries' : 'Library'}}</span>

    </div>

  </div>

</div>
