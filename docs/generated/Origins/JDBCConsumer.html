
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="The JDBC Consumer origin uses a JDBC connection to read database data. JDBC Consumer returns data as a map with column names and field values. When you configure JDBC Consumer, you specify connection ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="concept"></meta><meta name="DC.Title" content="JDBC Consumer"></meta><meta name="abstract" content="The JDBC Consumer origin uses a JDBC connection to read database data. JDBC Consumer returns data as a map with column names and field values."></meta><meta name="description" content="The JDBC Consumer origin uses a JDBC connection to read database data. JDBC Consumer returns data as a map with column names and field values."></meta><meta name="DC.Relation" scheme="URI" content="../Origins/Origins_title.html"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="concept_qhf_hjr_bs"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>JDBC Consumer</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../skin.css"></link><script type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../Origins/Origins_title.html" title="Origins">Origins</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../Origins/Origins_title.html" title="Origins"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Origins</span></a></span>  </div></td></tr></tbody></table>
<div class="nested0" id="concept_qhf_hjr_bs">
 <h1 class="title topictitle1">JDBC Consumer</h1>

 
 <div class="body conbody"><p class="shortdesc">The JDBC Consumer origin uses a JDBC connection to read database data. JDBC Consumer
    returns data as a map with column names and field values. </p>

    <p class="p">When you configure JDBC Consumer, you
      specify connection information, query interval, and custom JDBC configuration properties to
      determine how JDBC Consumer connects to the database. You configure the query mode, offset
      column, initial offset value, and SQL query to define the data returned by the database.</p>

    <p class="p">You can also configure add custom properties that your driver requires and configure
      additional properties for JDBC versions older than 4.0.</p>

  </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_aq1_lxp_fs">
 <h2 class="title topictitle2">Installing the Driver</h2>

 
 <div class="body conbody"><p class="shortdesc">To use JDBC Consumer, install the JDBC driver for the database that you are accessing. </p>

  <div class="p">You cannot
   access the database until you install the required driver. Install the driver in the following
   location, and then restart the <span class="ph">Data
                  Collector</span>:<pre class="pre codeblock">&lt;SDCinstalldir&gt;/streamsets-libs/streamsets-datacollector-basic-lib/lib</pre>
</div>

 </div>

</div>
<div class="topic concept nested1" id="concept_nxz_2kz_bs">
 <h2 class="title topictitle2">Offset Column and Offset Value</h2>

 
 <div class="body conbody"><p class="shortdesc">JDBC Consumer uses an offset column and initial offset value to determine where to start
  reading data within a table. Include both the offset column and the offset value in the WHERE
  clause of the SQL query.</p>

  <p class="p">Ideally, the offset column is a column in the table with
      unique values, such as a primary key or indexed column. The initial offset value is a value
      within the offset column where you want JDBC Consumer to start reading.</p>

 </div>

</div>
<div class="topic concept nested1" id="concept_hcm_gdq_ds">
 <h2 class="title topictitle2">Recovery</h2>

 
 <div class="body conbody"><p class="shortdesc">JDBC Consumer uses offset values in the offset column to determine where to continue
  processing after a deliberate or unexpected stop. To ensure seamless recovery, use a primary key
  or indexed column as the offset column.</p>

  <p class="p">As JDBC Consumer processes data, it tracks the offset value
   internally. When the pipeline stops, JDBC Consumer notes where it stopped processing data. When
   you restart the pipeline, it continues from the last-saved offset. </p>

 </div>

</div>
<div class="topic concept nested1" id="concept_ets_gnr_bs">
 <h2 class="title topictitle2">Full and Incremental Mode</h2>

 <div class="body conbody">
  <p class="p">JDBC Consumer can perform queries in two modes:  </p>

  <div class="p">
   <dl class="dl">
    
     <dt class="dt dlterm">Incremental mode</dt>

     <dd class="dd">When the JDBC Consumer performs an incremental query, it uses the initial offset as the
      offset value in the first SQL query. As JDBC Consumer completes processing the results of the
      first query, it saves the last offset value that it processes. When it requests a subsequent
      query, it returns data after the last-saved offset. You can reset the origin to use the
      initial offset value. </dd>

     <dd class="dd">Use incremental mode for append-only tables or when you do not need to capture changes to
      older rows. By default, JDBC Consumer uses incremental mode. </dd>

    
    
     <dt class="dt dlterm">Full mode</dt>

     <dd class="dd">When the JDBC Consumer performs a full query, it uses the initial offset as the offset
      value in the SQL query each time it requests data.</dd>

     <dd class="dd">Use a full mode to capture all row updates. You might use a Record Deduplicator in the
      pipeline to minimize repeated rows. Not ideal for large tables.</dd>

    
   </dl>

  </div>

 </div>

</div>
<div class="topic concept nested1" id="concept_uj4_mxy_bs">
  <h2 class="title topictitle2">SQL Query</h2>

  <div class="body conbody">
    <div class="p">The SQL query defines the data
      returned from the database. When you define the SQL query, use the following guidelines:<dl class="dl">
        
          <dt class="dt dlterm">In the WHERE clause, include the offset column and the offset value</dt>

          <dd class="dd">JDBC Consumer uses an offset column and value to determine the data that is returned.
            Include both in the WHERE clause of the query. </dd>

        
        
          <dt class="dt dlterm">Use ${OFFSET} to represent the offset value</dt>

          <dd class="dd">In the WHERE clause, use ${OFFSET} to represent the offset value. </dd>

          <dd class="dd">For example, when you start a pipeline, the following query returns all data from the
            table where the data in the offset column is greater than the initial offset value.
              <pre class="pre codeblock">SELECT * FROM &lt;tablename&gt; WHERE &lt;offset column&gt; &gt; ${OFFSET}</pre>
<div class="note tip"><span class="tiptitle">Tip:</span> When the offset values are strings, enclose ${OFFSET} in single quotation
              marks.</div>
</dd>

        
        
          <dt class="dt dlterm">In the ORDER BY clause, include the offset column as the first column.</dt>

          <dd class="dd">To avoid returning duplicate data, use the offset column as the first column in the
            ORDER BY clause.</dd>

          <dd class="dd">
            <div class="note note"><span class="notetitle">Note:</span> Using column that is not a primary key or indexed column in the ORDER BY clause
              can slow performance.</div>

          </dd>

        
      </dl>
</div>

  </div>

</div>
<div class="topic task nested1" id="task_ryz_tkr_bs">
    <h2 class="title topictitle2">Configuring a JDBC Consumer</h2>

    <div class="body taskbody">
        <div class="section context">
            <p class="p">Configure a JDBC Consumer origin
                to use a JDBC connection to read database data. </p>

        </div>

        <ol class="ol steps" id="task_ryz_tkr_bs__steps_hhn_vkr_bs"><li class="li step stepexpand">
                <span class="ph cmd">In the Properties panel, on the <span class="keyword wintitle">General</span> tab, configure the
                    following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ryz_tkr_bs__d2617e290" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="24.509803921568626%" id="d27962e275">General Property</th>

                                    <th class="entry" valign="top" width="75.49019607843137%" id="d27962e278">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="24.509803921568626%" headers="d27962e275 ">Name</td>

                                    <td class="entry" valign="top" width="75.49019607843137%" headers="d27962e278 ">Stage name.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="24.509803921568626%" headers="d27962e275 ">Description</td>

                                    <td class="entry" valign="top" width="75.49019607843137%" headers="d27962e278 ">Optional description.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="24.509803921568626%" headers="d27962e275 ">On Record Error</td>

                                    <td class="entry" valign="top" width="75.49019607843137%" headers="d27962e278 ">Error record handling for the stage: <ul class="ul" id="task_ryz_tkr_bs__d2617e337">
                                            <li class="li">Discard - Discards the record.</li>

                                            <li class="li">Send to Error - Sends the record to the pipeline for
                                                error handling.</li>

                                            <li class="li">Stop Pipeline - Stops the pipeline. Not valid for a
                                                cluster pipeline.</li>

                                        </ul>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">On the JDBC tab, configure the following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ryz_tkr_bs__table_nkm_dlr_bs" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="25.252525252525253%" id="d27962e347">JDBC Property</th>

                                    <th class="entry" valign="top" width="74.74747474747475%" id="d27962e350">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="25.252525252525253%" headers="d27962e347 ">JDBC Connection String</td>

                                    <td class="entry" valign="top" width="74.74747474747475%" headers="d27962e350 ">JDBC connection string.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="25.252525252525253%" headers="d27962e347 ">Incremental Mode  <a class="xref" href="JDBCConsumer.html#concept_ets_gnr_bs"><img class="image" id="task_ryz_tkr_bs__image_mm5_tvg_cs" src="../Graphics/icon_moreInfo.png" height="12" width="12"></img>
                                        </a></td>

                                    <td class="entry" valign="top" width="74.74747474747475%" headers="d27962e350 ">Defines how JDBC Consumer queries the database. Select to
                                        perform incremental queries. Clear to perform full queries.
                                            <p class="p">Default is incremental mode. </p>
</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="25.252525252525253%" headers="d27962e347 ">SQL Query  <a class="xref" href="JDBCConsumer.html#concept_uj4_mxy_bs"><img class="image" id="task_ryz_tkr_bs__image_yxz_srq_ds" src="../Graphics/icon_moreInfo.png" height="12" width="12"></img>
                                        </a></td>

                                    <td class="entry" valign="top" width="74.74747474747475%" headers="d27962e350 ">SQL query to use when reading data from the
                                        database.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="25.252525252525253%" headers="d27962e347 ">Initial Offset </td>

                                    <td class="entry" valign="top" width="74.74747474747475%" headers="d27962e350 ">Offset value to use when the pipeline starts.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="25.252525252525253%" headers="d27962e347 ">Offset Column  <a class="xref" href="JDBCConsumer.html#concept_nxz_2kz_bs" title="JDBC Consumer uses an offset column and initial offset value to determine where to start reading data within a table. Include both the offset column and the offset value in the WHERE clause of the SQL query."><img class="image" id="task_ryz_tkr_bs__image_rqs_srq_ds" src="../Graphics/icon_moreInfo.png" height="12" width="12"></img>
                                        </a></td>

                                    <td class="entry" valign="top" width="74.74747474747475%" headers="d27962e350 ">Column to use for the offset value.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="25.252525252525253%" headers="d27962e347 ">Query Interval</td>

                                    <td class="entry" valign="top" width="74.74747474747475%" headers="d27962e350 ">Amount of time to wait between queries. Enter an
                                        expression based on a unit of time. You can use SECONDS,
                                        MINUTES, or HOURS.<p class="p">Default is 10 seconds: ${10 * SECONDS}.
                                        </p>
</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="25.252525252525253%" headers="d27962e347 ">Use Credentials</td>

                                    <td class="entry" valign="top" width="74.74747474747475%" headers="d27962e350 ">Indicates whether to use a login to access the
                                        database.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="25.252525252525253%" headers="d27962e347 ">Additional JDBC Configuration</td>

                                    <td class="entry" valign="top" width="74.74747474747475%" headers="d27962e350 ">
                                        <p class="p">Additional JDBC configuration properties to use. To add
                                            properties, click <span class="ph uicontrol">Add</span> and define
                                            the JDBC property name and value. </p>

                                        <p class="p">Use the property names and values as expected by JDBC.
                                        </p>

                                    </td>

                                </tr>

                            </tbody>

                        </table>
</div>

                    
                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">When using JDBC credentials, on the <span class="ph uicontrol">Credentials</span> tab,
                    configure the following properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ryz_tkr_bs__table_mb1_kfs_bs" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="34.72222222222222%" id="d27962e488">Credentials Property</th>

                                    <th class="entry" valign="top" width="65.27777777777779%" id="d27962e491">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="34.72222222222222%" headers="d27962e488 ">Username</td>

                                    <td class="entry" valign="top" width="65.27777777777779%" headers="d27962e491 ">User name for the JDBC connection.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="34.72222222222222%" headers="d27962e488 ">Password</td>

                                    <td class="entry" valign="top" width="65.27777777777779%" headers="d27962e491 ">Password for the JDBC account</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">When using JDBC versions older than 4.0, on the <span class="ph uicontrol">Legacy
                        Drivers</span> tab, optionally configure the following
                    properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ryz_tkr_bs__table_ojq_d4s_bs" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="36.496350364963504%" id="d27962e543">Legacy Driver Property</th>

                                    <th class="entry" valign="top" width="63.503649635036496%" id="d27962e546">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="36.496350364963504%" headers="d27962e543 ">JDBC Class Driver Name</td>

                                    <td class="entry" valign="top" width="63.503649635036496%" headers="d27962e546 ">Class name for the JDBC driver. Required for JDBC
                                        versions older than version 4.0.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="36.496350364963504%" headers="d27962e543 ">Connection Health Test Query</td>

                                    <td class="entry" valign="top" width="63.503649635036496%" headers="d27962e546 ">Optional query to test the health of a connection.
                                        Recommended only when the JDBC version is older than 4.0. </td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
</ol>

    </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Origins/Origins_title.html" title="Origins"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Origins</span></a></span>  </div><div class="footer"><div> </div><!-- © <a href="http://creativecommons.org/licenses/by-nc/4.0/legalcode">CC BY-NC 4.0.</a> StreamSets, 2015. --></div>
</body>
</html>