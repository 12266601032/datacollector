
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="The Data Collector provides two environment configuration files: sdc-env.sh - Use when you start the Data Collector manually. sdcd.env.sh - Use when you start the Data Collector as a service. Also ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="concept"></meta><meta name="DC.Title" content="Data Collector Environment Configuration"></meta><meta name="DC.Relation" scheme="URI" content="../Install_Config/Install_Config_title.html"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="concept_rng_qym_qr"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Data Collector Environment Configuration</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../skin.css"></link><script type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../Install_Config/Install_Config_title.html" title="Installation and Configuration">Installation and Configuration</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../Install_Config/Install_Config_title.html" title="Installation and Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Installation and Configuration</span></a></span>  </div></td></tr></tbody></table>
<div class="nested0" id="concept_rng_qym_qr">
 <h1 class="title topictitle1"><span class="ph">Data
                  Collector</span>
  Environment Configuration</h1>

 <div class="body conbody">
  <div class="p">The <span class="ph">Data
                  Collector</span>
   provides two environment configuration files:<ul class="ul" id="concept_rng_qym_qr__ul_v4w_fph_1t">
    <li class="li"><samp class="ph codeph">sdc-env.sh</samp> - Use when you start the <span class="ph">Data
                  Collector</span>
     manually.</li>

    <li class="li"><samp class="ph codeph">sdcd.env.sh</samp> - Use when you start the <span class="ph">Data
                  Collector</span> as a
     service. Also defines the Data Collector user, group, and directories.</li>

   </ul>
</div>

  <div class="p">Both <span class="ph">Data
                  Collector</span>
   environment configuration files include the following environment variables:<dl class="dl">
    
     <dt class="dt dlterm">SDC_ROOT_CLASSPATH</dt>

     <dd class="dd">Defines the path to jar files to be added to the <span class="ph">Data
                  Collector</span> root
      classloader. Use for components that must be in the root classloader, such as Snappy. </dd>

    
    
     <dt class="dt dlterm">SDC_JAVA_OPTS</dt>

     <dd class="dd">Defines additional Java configuration options for the <span class="ph">Data
                  Collector</span>. By
      default, this property includes the heap size for the <span class="ph">Data
                  Collector</span>.</dd>

    
   </dl>
</div>

 </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_vrx_4fg_qr">
 <h2 class="title topictitle2">Java Configuration Options</h2>

 <div class="body conbody">
  <p class="p">You can edit the <span class="ph">Data
                  Collector</span>
      environment file to add or update Java configuration options. </p>

 </div>

<div class="topic concept nested2" id="concept_mdc_shg_qr">
 <h3 class="title topictitle3">Java Heap Size Configuration</h3>

 
 <div class="body conbody"><p class="shortdesc">You can define the Java heap size used by the <span class="ph">Data
                  Collector</span>. By default,
    the <span class="ph">Data
                  Collector</span> Java
    heap size is 1024 MB. </p>

  <p class="p">The Java heap size determines the heap
      size allocated to the <span class="ph">Data
                  Collector</span> and
      affects the amount of memory the <span class="ph">Data
                  Collector</span> can use
      when it runs a pipeline. Running a pipeline can use up to 65% of the allocated heap size. </p>

    <p class="p">Define the heap size as part of the SDC_JAVA_OPTS property in the <span class="ph">Data
                  Collector</span>
      environment configuration file. Increase or decrease the heap size as necessary, based on the
      resources available on the host machine.</p>

    <div class="p">Use the following Java options to define the Java heap size:<ul class="ul" id="concept_mdc_shg_qr__ul_vyw_rzl_qr">
        <li class="li">Xmx - Defines the maximum heap size.</li>

        <li class="li">Xms - Defines the minimum heap size.</li>

      </ul>
</div>

    <div class="p">
      <div class="note tip"><span class="tiptitle">Tip:</span> To avoid constant recalculation of the allocated heap size, set the both
        properties to the same value. To define the unit of measure, use m for MB and g for GB. </div>

    </div>

    <div class="p">For example, to double the heap size, you might change the following default
      settings:<pre class="pre codeblock">SDC_JAVA_OPTS="<span class="ph uicontrol">-Xmx1024m -Xms1024m</span> -XX:PermSize=128m -XX:MaxPermSize=256m -server ${SDC_JAVA_OPTS}"</pre>
</div>

    <p class="p">to increase the Xmx and Xms settings as follows:</p>

    <div class="p">
      <pre class="pre codeblock">SDC_JAVA_OPTS="<span class="ph uicontrol">-Xmx2048m -Xms2048m</span> -XX:PermSize=128m -XX:MaxPermSize=256m -server ${SDC_JAVA_OPTS}"</pre>

    </div>

    <div class="p">With a heap size of 2048 MB, you can configure a pipeline to use up to 65% - that's 1331 MB
      of memory.<div class="note note"><span class="notetitle">Note:</span> In the pipeline properties, you can use the jvm:maxMemoryMB() function to help
        define the percentage of the heap size the pipeline uses.</div>
</div>

 </div>

</div>
<div class="topic concept nested2" id="concept_kxf_y2m_sr">
 <h3 class="title topictitle3">Permanent Generation Size</h3>

 
 <div class="body conbody"><p class="shortdesc">When you use the <span class="ph">Data
                  Collector</span> with Java 7,
  you can define the Java Permanent Generation size, also known as the PermGen size.</p>

  <p class="p">The PermGen size determines the amount of
      memory that the <span class="ph">Data
                  Collector</span> web
      application server uses. Define the PermGen size as part of the SDC_JAVA_OPTS property in the
        <span class="ph">Data
                  Collector</span>
      environment configuration file.</p>

  <div class="p">Use the following properties to define the PermGen size:<ul class="ul" id="concept_kxf_y2m_sr__ul_qjd_33m_sr">
        <li class="li">MaxPermSize - Set to 1/4 of the Java heap size, with a minimum of 128 MB.</li>

        <li class="li">PermSize - Set to 1/8 of the Java heap size, with a minimum of 128 MB.</li>

      </ul>
</div>

    <p class="p">Setting the properties higher than these guidelines can cause out of memory errors or cause
      the <span class="ph">Data
                  Collector</span> to
      fail to start.</p>

    <div class="p">By default, the PermGen size is defined as
      follows:<pre class="pre codeblock">SDC_JAVA_OPTS="-Xmx1024m  -Xms1024m <span class="ph uicontrol">-XX:PermSize=128M -XX:MaxPermSize=256M</span> -server ${SDC_JAVA_OPTS}"</pre>
</div>

    <div class="p">If, for example, you doubled the heap size to 2048 MB, you might set the options as
      follows:<pre class="pre codeblock"> SDC_JAVA_OPTS="-Xmx2048m  -Xms1048m  <span class="ph uicontrol">-XX:PermSize=256M -XX:MaxPermSize=512M</span> -server ${SDC_JAVA_OPTS} "
</pre>
</div>

 </div>

</div>
<div class="topic concept nested2" id="concept_jdj_4rg_1t">
 <h3 class="title topictitle3">Enabling External JMX Tools</h3>

 
 <div class="body conbody"><p class="shortdesc">The <span class="ph">Data
                  Collector</span> can provide JMX metrics to third-party tools. </p>

  <div class="p">The following Java environment variables enable
   passing JMX metrics to external tools:<ul class="ul" id="concept_jdj_4rg_1t__ul_trq_qsh_1t">
    <li class="li">Dcom.sun.management.jmxremote</li>

    <li class="li">Dcom.sun.management.jmxremote.port=&lt;port_number&gt;</li>

    <li class="li">Dcom.sun.management.jmxremote.local.only=&lt;true | false&gt;</li>

    <li class="li">Dcom.sun.management.jmxremote.authenticate=&lt;true | false&gt;</li>

    <li class="li">Dcom.sun.management.jmxremote.ssl=&lt;true | false&gt;</li>

   </ul>
</div>

  <p class="p">You can pass the variables in the command line if you start the <span class="ph">Data
                  Collector</span> manually. Or,
   you can add the variables to the SDC_JAVA_OPTS environment variable in the <span class="ph">Data
                  Collector</span> environment
   file. </p>

  <p class="p">For example, the following set of variables passes JMX metrics through port 80345 using
   authentication but without SSL:</p>

  <div class="p">
   <pre class="pre codeblock">SDC_JAVA_OPTS "-Dcom.sun.management.jmxremote 
- Dcom.sun.management.jmxremote.port=80345
-Dcom.sun.management.jmxremote.local.only=false 
-Dcom.sun.management.jmxremote.authenticate=true 
-Dcom.sun.management.jmxremote.ssl=false"</pre>

  </div>

 </div>

</div>
</div>
<div class="topic concept nested1" id="concept_tm4_pbg_ht">
 <h2 class="title topictitle2">Java Security Manager</h2>

 
 <div class="body conbody"><p class="shortdesc">The <span class="ph">Data
                  Collector</span> includes a Java Security Manager that is enabled by default. </p>

  <p class="p">The Java Security Manager restricts the runtime permissions of user libraries. This allows
   administrators to control what user libraries do on production systems. For example, by default,
   user libraries cannot call out to network resources and potentially cause denial of service
   attacked.</p>

  <p class="p">The security policy is defined in the <samp class="ph codeph">sdc-security.policy</samp> file located in the
    <span class="ph">Data
                  Collector</span>
   configuration directory: &lt;SDCinstalldir&gt;/etc. The file syntax is <a class="xref" href="http://docs.oracle.com/javase/7/docs/technotes/guides/security/PolicyFiles.html" target="_blank">java standard</a>. </p>

  <p class="p">To disable the Java Security Manager, edit the SDC_SECURITY_MANAGER_ENABLED flag in the <span class="ph">Data
                  Collector</span> environment
   file. </p>

 </div>

</div>
<div class="topic task nested1" id="task_ugz_41n_qr">
    <h2 class="title topictitle2">Configuring the Data Collector Environment</h2>

    
    <div class="body taskbody"><p class="shortdesc">You can customize the <span class="ph">Data
                  Collector</span>
        environment by editing the <span class="ph">Data
                  Collector</span>
        environment configuration file. </p>

        <div class="section context">
            <p class="p">Use a text editor to edit
                the <span class="ph">Data
                  Collector</span> environment configuration file. After you edit the file, restart the <span class="ph">Data
                  Collector</span> to enable the changes. </p>

            <div class="p">Use one of the following <span class="ph">Data
                  Collector</span> environment configuration files:<ul class="ul" id="task_ugz_41n_qr__ul_vmp_l3h_1t">
                    <li class="li">If you start the <span class="ph">Data
                  Collector</span> from the command line, use the following file:
                        <pre class="pre codeblock">&lt;SDCinstalldir&gt;/libexec/sdc-env.sh</pre>
</li>

                    <li class="li">If you start the <span class="ph">Data
                  Collector</span> as a service, use the following file:
                        <pre class="pre codeblock">&lt;SDCinstalldir&gt;/libexec/sdcd-env.sh</pre>
</li>

                </ul>
The <span class="ph">Data
                  Collector</span> environment configuration file includes the following environment
                    variables:
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_ugz_41n_qr__table_hby_1bn_qr" class="table" frame="border" border="1" rules="all">
                        
                        
                        <thead class="thead" align="left">
                            <tr class="row">
                                <th class="entry" valign="top" width="43.75%" id="d22829e452">Environment Variables</th>

                                <th class="entry" valign="top" width="56.25%" id="d22829e455">Description</th>

                            </tr>

                        </thead>

                        <tbody class="tbody">
                            <tr class="row">
                                <td class="entry" valign="top" width="43.75%" headers="d22829e452 ">SDC_ROOT_CLASSPATH</td>

                                <td class="entry" valign="top" width="56.25%" headers="d22829e455 ">Defines the path to jar files to be added to the Data
                                    Collector root classloader. Use for components that must be in
                                    the root classloader, such as Snappy. </td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" width="43.75%" headers="d22829e452 ">SDC_JAVA_OPTS</td>

                                <td class="entry" valign="top" width="56.25%" headers="d22829e455 ">Additional Java options for the <span class="ph">Data
                  Collector</span>. <p class="p">By default, the Xmx and Xms properties set the <span class="ph">Data
                  Collector</span> Java heap size to 1024 MB. </p>
<p class="p">By default, XX:PermSize
                                        is set to 128 MB and XX:MaxPermSize is set to 256 MB.
                                        </p>
<p class="p">You can add any valid Java property.</p>
</td>

                            </tr>

                            <tr class="row">
                                <td class="entry" valign="top" width="43.75%" headers="d22829e452 ">SDC_SECURITY_MANAGER_ENABLED </td>

                                <td class="entry" valign="top" width="56.25%" headers="d22829e455 ">When enabled, the Java Security Manager restricts the runtime
                                    permissions of user libraries. <p class="p">Default is true. </p>
</td>

                            </tr>

                        </tbody>

                    </table>
</div>
</div>

        </div>

    </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Install_Config/Install_Config_title.html" title="Installation and Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Installation and Configuration</span></a></span>  </div><div class="footer"></div>
</body>
</html>