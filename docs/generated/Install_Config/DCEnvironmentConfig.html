
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="Data Collector provides two environment configuration files: $SDC_DIST/libexec/sdc-env.sh - Used when you start Data Collector manually from the command line. $SDC_DIST/libexec/sdcd-env.sh - Used when ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="concept"></meta><meta name="DC.Title" content="Data Collector Environment Variables"></meta><meta name="DC.Relation" scheme="URI" content="../Install_Config/Install_Config_title.html"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="concept_rng_qym_qr"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Data Collector Environment Variables</title><!--  Generated with Oxygen version 17.1, build number 2016020417.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css"><!----></link><link rel="stylesheet" type="text/css" href="../skin.css"></link><script type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><!--
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--></head>
<body onload="highlightSearchTerm()" class="frmBody"><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
​
  ga('create', 'UA-53969024-1', 'auto');
  ga('send', 'pageview');
​
</script>
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../Install_Config/Install_Config_title.html" title="Installation and Configuration">Installation and Configuration</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../Install_Config/Install_Config_title.html" title="Installation and Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Installation and Configuration</span></a></span>  </div></td></tr></tbody></table>
<div class="nested0" id="concept_rng_qym_qr">
 <h1 class="title topictitle1">Data Collector Environment Variables</h1>

 <div class="body conbody">
    <p class="p"><span class="ph">Data
                  Collector</span> provides
      two environment configuration files:</p>

    <div class="p">
      <ul class="ul" id="concept_rng_qym_qr__ul_vmp_l3h_1t">
        <li class="li"><samp class="ph codeph">$SDC_DIST/libexec/sdc-env.sh</samp> - Used when you start <span class="ph">Data
                  Collector</span>
          manually from the command line. </li>

        <li class="li"><samp class="ph codeph">$SDC_DIST/libexec/sdcd-env.sh</samp> - Used when you start <span class="ph">Data
                  Collector</span> as a
          service.</li>

      </ul>

    </div>

   <p class="p">Use a text editor to edit the appropriate environment configuration file. Some of the
      environment variables in the <samp class="ph codeph">sdc-env.sh</samp> file are commented out and do not
      reflect the default values. Be sure to uncomment the line when you change a variable
      value.</p>

    <p class="p">After you edit the file, restart <span class="ph">Data
                  Collector</span> to enable
      the changes. </p>

        <div class="p">You can modify the environment variables in the file to customize the following areas:<ul class="ul" id="concept_rng_qym_qr__ul_ulw_sjr_3v">
        <li class="li"><span class="ph">Data
                  Collector</span>
          directories</li>

        <li class="li">User and group used to start <span class="ph">Data
                  Collector</span> as a
          service</li>

        <li class="li">Java configuration options</li>

        <li class="li">Path to jar files to be added to the root classloader</li>

      </ul>

    </div>

  </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_mnx_j3r_3v">
 <h2 class="title topictitle2">Data Collector Directories</h2>

 
 <div class="body conbody"><p class="shortdesc">You can edit the <span class="ph">Data
                  Collector</span>
        environment configuration file to modify the directories used to store configuration, data,
        log, and resource files.</p>

  <p class="p">The
                <samp class="ph codeph">$SDC_DIST</samp> environment variable defines the <span class="ph">Data
                  Collector</span>
            runtime directory. The runtime directory is the base <span class="ph">Data
                  Collector</span>
            directory that stores the executables and related files. This environment variable is
            set during installation.</p>

        <p class="p">When you start <span class="ph">Data
                  Collector</span>
            manually, the default values of the remaining directory variables are relative to the
                <samp class="ph codeph">$SDC_DIST</samp> runtime directory. When you start <span class="ph">Data
                  Collector</span> as
            a service, the default values of the remaining directory variables are absolute paths
            that are outside of the <samp class="ph codeph">$SDC_DIST</samp> runtime directory. </p>

        <p class="p">You can configure the following environment variables that define directories:</p>

        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_mnx_j3r_3v__table_dzl_hyr_3v" class="table" frame="border" border="1" rules="all">
                
                
                <thead class="thead" align="left">
                    <tr class="row">
                        <th class="entry" valign="top" width="35%" id="d67797e181">Environment Variable</th>

                        <th class="entry" valign="top" width="65%" id="d67797e184">Description</th>

                    </tr>

                </thead>

                <tbody class="tbody">
                    <tr class="row">
                        <td class="entry" valign="top" width="35%" headers="d67797e181 ">SDC_CONF<a class="xref" href="DCConfig.html#concept_pq5_xjq_kr" title="You can edit the Data Collector configuration file, $SDC_CONF/sdc.properties, to configure properties such as the host name and port number and account information for email alerts.">
                                <img class="image" src="../Graphics/icon_moreInfo.png" height="12" width="12"></img></a>
                        </td>

                        <td class="entry" valign="top" width="65%" headers="d67797e184 ">
                            <p class="p">Defines the configuration directory for the Data Collector
                                configuration file, <samp class="ph codeph">sdc.properties</samp>, and related
                                realm properties files and keystore files. Also includes the logj4
                                properties file. </p>

                            <p class="p">Default values:</p>

                            <ul class="ul">
                                <li class="li">Manual start: <samp class="ph codeph">$SDC_DIST/etc</samp></li>

                                <li class="li">Service start: <samp class="ph codeph">/etc/sdc</samp></li>

                            </ul>

                        </td>

                    </tr>

                    <tr class="row">
                        <td class="entry" valign="top" width="35%" headers="d67797e181 ">SDC_DATA</td>

                        <td class="entry" valign="top" width="65%" headers="d67797e184 ">
                            <p class="p">Defines the data directory for pipeline configuration and run
                                details. </p>

                            <p class="p">Default values:</p>

                            <ul class="ul">
                                <li class="li">Manual start: <samp class="ph codeph">$SDC_DIST/data</samp></li>

                                <li class="li">Service start: <samp class="ph codeph">/var/lib/sdc</samp></li>

                            </ul>

                        </td>

                    </tr>

                    <tr class="row">
                        <td class="entry" valign="top" width="35%" headers="d67797e181 ">SDC_LOG</td>

                        <td class="entry" valign="top" width="65%" headers="d67797e184 ">
                            <p class="p">Defines the log directory. </p>

                            <p class="p">Default values:</p>

                            <ul class="ul">
                                <li class="li">Manual start: <samp class="ph codeph">$SDC_DIST/log</samp></li>

                                <li class="li">Service start: <samp class="ph codeph">/var/log/sdc</samp></li>

                            </ul>

                        </td>

                    </tr>

                    <tr class="row">
                        <td class="entry" valign="top" width="35%" headers="d67797e181 ">SDC_RESOURCES <a class="xref" href="../Advanced_Config/RuntimeResources.html#concept_bs4_5nm_2s" title="Similar to runtime properties, runtime resources are values that you define in a file local to the Data Collector and call from within a pipeline. But with runtime resources, you can restrict the permissions for the files to secure sensitive information. Use runtime resources to load sensitive information from files at runtime.">
                                <img class="image" src="../Graphics/icon_moreInfo.png" height="12" width="12"></img></a>
                        </td>

                        <td class="entry" valign="top" width="65%" headers="d67797e184 ">Defines the directory for runtime resource files. <p class="p">Default
                                values:</p>
<ul class="ul">
                                <li class="li">Manual start: <samp class="ph codeph">$SDC_DIST/resources</samp></li>

                                <li class="li">Service start: <samp class="ph codeph">/var/lib/sdc-resources</samp></li>

                            </ul>
</td>

                    </tr>

                </tbody>

            </table>
</div>

 </div>

</div>
<div class="topic concept nested1" id="concept_htz_t1s_3v">
 <h2 class="title topictitle2">User and Group for Service Start</h2>

    
 <div class="body conbody"><p class="shortdesc">When you run <span class="ph">Data
                  Collector</span> as a
        service, you must create a system user and group named sdc, or you must edit the values of
        the SDC_USER and SDC_GROUP environment variables to point to an existing system user or
        group.</p>

     <div class="p">The
                <samp class="ph codeph">$SDC_DIST/libexec/sdcd-env.sh</samp> file includes the following user and
            group environment variables: <ul class="ul" id="concept_htz_t1s_3v__ul_gpg_4jt_3v">
                <li class="li">SDC_USER - Defines the system user used to run <span class="ph">Data
                  Collector</span> as a service. Default is sdc.</li>

                <li class="li">SDC_GROUP - Defines the system group used to run <span class="ph">Data
                  Collector</span> as a service. Default is sdc.</li>

            </ul>
</div>

 </div>

</div>
<div class="topic concept nested1" id="concept_vrx_4fg_qr">
 <h2 class="title topictitle2">Java Configuration Options</h2>

 <div class="body conbody">
  <p class="p">You can edit the <span class="ph">Data
                  Collector</span>
      environment configuration file to add or update Java configuration options. </p>

 </div>

<div class="topic concept nested2" id="concept_mdc_shg_qr">
 <h3 class="title topictitle3">Java Heap Size Configuration</h3>

 
 <div class="body conbody"><p class="shortdesc">You can define the <span class="ph">Data
                  Collector</span> Java heap
    size. By default, the  Java heap size is 1024 MB. </p>

  <p class="p">The Java heap size determines the heap
      size allocated to <span class="ph">Data
                  Collector</span> and
      affects the amount of memory <span class="ph">Data
                  Collector</span> can use
      when it runs a pipeline. Running a pipeline can use up to 65% of the allocated heap size. </p>

   <p class="p">Define the heap size as part of the SDC_JAVA_OPTS environment variable in the <span class="ph">Data
                  Collector</span>
      environment configuration file. Increase or decrease the heap size as necessary, based on the
      resources available on the host machine.</p>

    <div class="p">Use the following Java options to define the Java heap size:<ul class="ul" id="concept_mdc_shg_qr__ul_vyw_rzl_qr">
        <li class="li">Xmx - Defines the maximum heap size.</li>

        <li class="li">Xms - Defines the minimum heap size.</li>

      </ul>
</div>

    <div class="p">
      <div class="note tip"><span class="tiptitle">Tip:</span> To avoid constant recalculation of the allocated heap size, set the both
        properties to the same value. To define the unit of measure, use m for MB and g for GB. </div>

    </div>

    <div class="p">For example, to double the heap size, you might change the following default
      settings:<pre class="pre codeblock">SDC_JAVA_OPTS="<span class="ph uicontrol">-Xmx1024m -Xms1024m</span> -XX:PermSize=128m -XX:MaxPermSize=256m -server ${SDC_JAVA_OPTS}"</pre>
</div>

    <p class="p">to increase the Xmx and Xms settings as follows:</p>

    <div class="p">
      <pre class="pre codeblock">SDC_JAVA_OPTS="<span class="ph uicontrol">-Xmx2048m -Xms2048m</span> -XX:PermSize=128m -XX:MaxPermSize=256m -server ${SDC_JAVA_OPTS}"</pre>

    </div>

    <div class="p">With a heap size of 2048 MB, you can configure a pipeline to use up to 65% - that's 1331 MB
      of memory.<div class="note note"><span class="notetitle">Note:</span> In the pipeline properties, you can use the jvm:maxMemoryMB() function to help
        define the percentage of the heap size the pipeline uses.</div>
</div>

 </div>

</div>
<div class="topic concept nested2" id="concept_kxf_y2m_sr">
 <h3 class="title topictitle3">Permanent Generation Size</h3>

 
 <div class="body conbody"><p class="shortdesc">When you use <span class="ph">Data
                  Collector</span> with Java 7,
    you can define the Java Permanent Generation size, also known as the PermGen size.</p>

  <p class="p">The PermGen size determines the amount of
      memory that the <span class="ph">Data
                  Collector</span> web
    application server uses. Define the PermGen size as part of the SDC_JAVA_OPTS environment
      variable in the <span class="ph">Data
                  Collector</span>
      environment configuration file.</p>

  <div class="p">Use the following properties to define the PermGen size:<ul class="ul" id="concept_kxf_y2m_sr__ul_qjd_33m_sr">
        <li class="li">MaxPermSize - Set to 1/4 of the Java heap size, with a minimum of 128 MB.</li>

        <li class="li">PermSize - Set to 1/8 of the Java heap size, with a minimum of 128 MB.</li>

      </ul>
</div>

    <p class="p">Setting the properties higher than these guidelines can cause out of memory errors or cause
        <span class="ph">Data
                  Collector</span> to
      fail to start.</p>

    <div class="p">By default, the PermGen size is defined as
      follows:<pre class="pre codeblock">SDC_JAVA_OPTS="-Xmx1024m  -Xms1024m <span class="ph uicontrol">-XX:PermSize=128M -XX:MaxPermSize=256M</span> -server ${SDC_JAVA_OPTS}"</pre>
</div>

    <div class="p">If, for example, you doubled the heap size to 2048 MB, you might set the options as
      follows:<pre class="pre codeblock"> SDC_JAVA_OPTS="-Xmx2048m  -Xms1048m  <span class="ph uicontrol">-XX:PermSize=256M -XX:MaxPermSize=512M</span> -server ${SDC_JAVA_OPTS} "
</pre>
</div>

 </div>

</div>
</div>
<div class="topic concept nested1" id="concept_jdj_4rg_1t">
 <h2 class="title topictitle2">Enabling External JMX Tools</h2>

 
 <div class="body conbody"><p class="shortdesc"><span class="ph">Data
                  Collector</span>
    uses JMX metrics to generate the graphical display of the status of a running pipeline. You can
    provide the same JMX metrics to external tools if desired.</p>

    <p class="p">
      Information
      provided by JMX metrics includes pipeline details like a histogram for the number of error
      records per batch or the amount of memory the pipeline uses. Stage-related details are also
      provided, such as the number of output records or stage errors. Some stages have stage-related
      custom metrics.</p>

    <div class="p">The following Java environment variables expose the <span class="ph">Data
                  Collector</span> JMX
      metrics on a specified port, allowing integration with external tools:<ul class="ul" id="concept_jdj_4rg_1t__ul_trq_qsh_1t">
        <li class="li">com.sun.management.jmxremote</li>

        <li class="li">com.sun.management.jmxremote.port=&lt;port_number&gt;</li>

        <li class="li">com.sun.management.jmxremote.local.only=&lt;true | false&gt;</li>

        <li class="li">com.sun.management.jmxremote.authenticate=&lt;true | false&gt;</li>

        <li class="li">com.sun.management.jmxremote.ssl=&lt;true | false&gt;</li>

      </ul>
</div>

  <p class="p">You can pass the variables in the command line as part of the SDC_JAVA_OPTS environment
      variable. Or, you can add the variables to the SDC_JAVA_OPTS environment variable in the <span class="ph">Data
                  Collector</span>
      environment file. </p>

  <p class="p">For example, the following set of variables passes JMX metrics through port 3333:</p>

  <div class="p">
   <pre class="pre codeblock">export SDC_JAVA_OPTS="-Dcom.sun.management.jmxremote \
-Dcom.sun.management.jmxremote.port=3333 \
-Dcom.sun.management.jmxremote.local.only=false \
-Dcom.sun.management.jmxremote.authenticate=false \
-Dcom.sun.management.jmxremote.ssl=false"</pre>

  </div>

 </div>

<div class="topic concept nested2" id="concept_oz2_lkt_nv">
 <h3 class="title topictitle3">Viewing JMX Metrics in External Tools</h3>

 
 <div class="body conbody"><p class="shortdesc">You can view the <span class="ph">Data
                  Collector</span> JMX
        metrics in external tools. The <span class="ph">Data
                  Collector</span> JMX
        metric names all begin with "sdc.pipeline."</p>

  <p class="p"><span class="ph">Data
                  Collector</span>
            JVM metrics use the following naming pattern:</p>

        <pre class="pre codeblock">sdc.pipeline.&lt;pipeline name&gt;.&lt;pipeline revision&gt;.&lt;category: pipeline|stage|custom&gt;.\
[&lt;stage library&gt;_&lt;library revision&gt;].&lt;metric name&gt;.&lt;metric type&gt;</pre>

        <p class="p">For example, the following is a batch count meter for the first revision of a pipeline
            named Write to Kafka:</p>

        <pre class="pre codeblock">sdc.pipeline.Write to Kafka.0.pipeline.batchCount.meter</pre>

        <div class="p">The following metric is a counter for the memory consumed by the File Tail origin in the
            same Write to Kafka
            pipeline:<pre class="pre codeblock">sdc.pipeline.Write to Kafka.0.stage.\
com_streamsets_pipeline_stage_origin_logtail_FileTailDSource_1.memoryConsumed.counter</pre>
</div>

 </div>

</div>
<div class="topic concept nested2" id="concept_llw_2st_nv">
 <h3 class="title topictitle3">Custom Metrics</h3>

 <div class="body conbody">
        
  <div class="p"><span class="ph">Data
                  Collector</span> provides
            custom metrics for some stages. When you view JMX metrics using an external tool and
            when a pipeline includes the stages below, you can view custom metrics for the stages:<dl class="dl">
                
                    <dt class="dt dlterm">File Tail origin</dt>

                    <dd class="dd">In addition to the standard metrics available for origins, File Tail
                        provides the following custom metrics:<ul class="ul" id="concept_llw_2st_nv__ul_yqv_kxt_nv">
                            <li class="li">Offset Lag - The amount of data remaining in the file being read.
                                This metric displays in external tools as
                                follows:<pre class="pre codeblock">sdc.pipeline.&lt;pipeline name&gt;.&lt;pipeline revision&gt;.custom.\
com_streamsets_pipeline_stage_origin_logtail_FileTailDSource_&lt;library version&gt;.offsets.lag.&lt;file path&gt;.counter</pre>
</li>

                            <li class="li">Pending Files - The number of files in the directory that still need
                                to be read. This metric displays in external tools as
                                follows:<pre class="pre codeblock">sdc.pipeline.&lt;pipeline name&gt;.&lt;pipeline revision&gt;.custom.\
com_streamsets_pipeline_stage_origin_logtail_FileTailDSource_&lt;library version&gt;.pending.files.&lt;file path&gt;.counter</pre>
</li>

                        </ul>
</dd>

                
                
                    <dt class="dt dlterm">Local FS destination</dt>

                    <dd class="dd">In addition to the standard metrics available for origins, LocalFS provides
                        the following custom metrics:<ul class="ul" id="concept_llw_2st_nv__ul_m4h_txt_nv">
                            <li class="li">Late Records meter and counter - The number of late records written
                                to the destination system. The counter displays in external tools as
                                    follows:<pre class="pre codeblock">sdc.pipeline.&lt;pipeline name&gt;.&lt;pipeline revision&gt;.custom.\
com_streamsets_pipeline_stage_destination_localfilesystem_LocalFileSystemDTarget_&lt;library version&gt;.lateRecords.&lt;file path&gt;.&lt;counter | metric&gt;</pre>
</li>

                        </ul>
</dd>

                
            </dl>
</div>

 </div>

</div>
</div>
<div class="topic concept nested1" id="concept_tm4_pbg_ht">
 <h2 class="title topictitle2">Java Security Manager</h2>

 
 <div class="body conbody"><p class="shortdesc"><span class="ph">Data
                  Collector</span>
    includes a Java Security Manager that is enabled by default. </p>

  <p class="p">The Java Security Manager restricts the runtime permissions of user libraries. This allows
   administrators to control what user libraries do on production systems. For example, by default,
   user libraries cannot call out to network resources and potentially cause denial of service
   attacked.</p>

  <p class="p">The security policy is defined in the <samp class="ph codeph">$SDC_CONF/sdc-security.policy</samp> file. The
      file syntax is <a class="xref" href="http://docs.oracle.com/javase/7/docs/technotes/guides/security/PolicyFiles.html" target="_blank">java standard</a>. </p>

   <p class="p">To disable the Java Security Manager, edit the SDC_SECURITY_MANAGER_ENABLED environment
      variable in the <span class="ph">Data
                  Collector</span>
      environment configuration file. </p>

 </div>

</div>
<div class="topic concept nested1" id="concept_hcb_4ks_3v">
 <h2 class="title topictitle2">Root Classloader</h2>

    
 <div class="body conbody"><p class="shortdesc">You can edit the <span class="ph">Data
                  Collector</span>
        environment configuration file to configure the path to jar files to be added to the <span class="ph">Data
                  Collector</span> root
        classloader.</p>

     <p class="p">The SDC_ROOT_CLASSPATH environment variable defines the path to jar files
            to be added to the <span class="ph">Data
                  Collector</span>
            root classloader. Use the variable for components that must be in the root classloader,
            such as Snappy. Default is <samp class="ph codeph">$SDC_DIST/root-lib/'*'</samp>.</p>

 </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Install_Config/Install_Config_title.html" title="Installation and Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Installation and Configuration</span></a></span>  </div>
</body>
</html>