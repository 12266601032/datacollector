
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="Data Collector can authenticate user accounts based on LDAP or files. Best practice is to use LDAP if your organization has it. By default, Data Collector uses file-based authentication. Data ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="concept"></meta><meta name="DC.Title" content="User Authentication"></meta><meta name="abstract" content="Data Collector can authenticate user accounts based on LDAP or files. Best practice is to use LDAP if your organization has it. By default, Data Collector uses file-based authentication."></meta><meta name="description" content="Data Collector can authenticate user accounts based on LDAP or files. Best practice is to use LDAP if your organization has it. By default, Data Collector uses file-based authentication."></meta><meta name="DC.Relation" scheme="URI" content="../Install_Config/Install_Config_title.html"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="concept_dns_dvg_h5"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>User Authentication</title><!--  Generated with Oxygen version 17.1, build number 2016020417.  --><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/skins/skin.css"><!----></link><link rel="stylesheet" type="text/css" href="../skin.css"></link><script type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script><!--
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
--></head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../Install_Config/Install_Config_title.html" title="Installation and Configuration">Installation and Configuration</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../Install_Config/Install_Config_title.html" title="Installation and Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Installation and Configuration</span></a></span>  </div></td></tr></tbody></table>
<div class="nested0" id="concept_dns_dvg_h5">
 <h1 class="title topictitle1">User Authentication</h1>

 
 <div class="body conbody"><p class="shortdesc"><span class="ph">Data
                  Collector</span>
        can authenticate user accounts based on LDAP or files. Best practice is to use LDAP if your
        organization has it. By default, <span class="ph">Data
                  Collector</span> uses
        file-based authentication.</p>

  <p class="p"><span class="ph">Data
                  Collector</span>
            provides several roles that determine the actions that users can perform. The steps you
            use to assign roles to user accounts vary, based on whether you are using LDAP or
            file-based authentication.</p>

        <div class="note note"><span class="notetitle">Note:</span> A production deployment of <span class="ph">Data
                  Collector</span>
            should integrate with LDAP authentication. </div>

 </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_x2j_5ts_g5">
 <h2 class="title topictitle2">Configuring LDAP Authentication</h2>

 
 <div class="body conbody"><p class="shortdesc">If your organization uses LDAP, configure <span class="ph">Data
                  Collector</span> to use
        LDAP authentication. After you configure LDAP authentication, users log in to <span class="ph">Data
                  Collector</span> using
        their LDAP username and password. </p>

        <div class="p">To configure
            LDAP authentication, perform the following tasks:<ol class="ol" id="concept_x2j_5ts_g5__ol_dqf_dts_5x">
                <li class="li">Configure LDAP connection information.</li>

                <li class="li">Map LDAP groups to <span class="ph">Data
                  Collector</span> roles.</li>

                <li class="li">Optionally, configure multiple LDAP servers.</li>

                <li class="li">If you use MapR stages, enable LDAP authentication for MapR.</li>

            </ol>
</div>

    </div>

<div class="topic task nested2" id="task_tjw_3ss_5x">
    <h3 class="title topictitle3">Step 1. Configure LDAP Connection Information</h3>

    
    <div class="body taskbody"><p class="shortdesc">To enable LDAP authentication, configure LDAP connection information in the <span class="ph">Data
                  Collector</span>
        configuration files, <samp class="ph codeph">sdc.properties</samp> and <samp class="ph codeph">ldap-login.conf</samp>,
        located in the <samp class="ph codeph">$SDC_CONF</samp> directory.</p>

        <div class="section context"></div>

        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">In  the <span class="ph">Data
                  Collector</span> configuration file, <samp class="ph codeph">$SDC_CONF/sdc.properties</samp>, enable LDAP
                    authentication by setting the
                        <span class="ph uicontrol">http.authentication.login.module</span> property to
                        <span class="ph uicontrol">ldap</span>.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">In  the <samp class="ph codeph">$SDC_CONF/ldap-login.conf</samp> file, configure the
                    connection information for the LDAP server.</span>
                <div class="itemgroup info">In the file, configure the following properties: 
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_tjw_3ss_5x__table_g4g_hx4_s5" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="30%" id="d115608e161">LDAP Property</th>

                                    <th class="entry" valign="top" width="70%" id="d115608e164">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">debug</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Enables LDAP debugging. Default is false.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">useLdaps</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Enables using LDAP over SSL. Default is false. </td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">contextFactory</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">LDAP initial context factory. Default is
                                        com.sun.jndi.ldap.LdapCtxFactory.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">hostname</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">LDAP server host name.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">port</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">LDAP server port. Typically 389 for LDAP and 636 for
                                        LDAPS.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">bindDn</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Root distinguished name (DN) used to query the directory
                                        server. This user must have privileges to search the
                                        directory. </td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">bindPassword</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Password for the root distinguished name. For additional
                                        security, save the password in the
                                            <samp class="ph codeph">$SDC_CONF/ldap-bind-password.txt</samp> file
                                        without additional characters, spaces, or line breaks. As a
                                        best practice, the file should have owner-only
                                            permissions.<p class="p">Default is @ldap-bind-password.txt@,
                                            which points to the
                                                <samp class="ph codeph">ldap-bind-password.txt</samp> file for the
                                            password.</p>
</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">authenticationMethod</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Authentication method. Default is simple. </td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">forceBindingLogin</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Determines if binding login checks are performed. Use one
                                        of the following options:<ul class="ul" id="task_tjw_3ss_5x__ul_dpb_z2z_s5">
                                            <li class="li">false - <span class="ph">Data
                  Collector</span> performs the authentication based on information
                                                received from the LDAP server. <p class="p">When set to false,
                                                  the bindDn user must have permission to access the
                                                  details, password, and group information for
                                                  users.</p>
<p class="p">Use for Digest
                                                authentication.</p>
</li>

                                            <li class="li">true - <span class="ph">Data
                  Collector</span> passes the user credentials to the LDAP server
                                                for authentication. <p class="p">When set to true, the bindDn
                                                  user must have permission to access the group
                                                  information for users.</p>
<p class="p">Use for Basic or Form
                                                  authentication, or when the password stored in the
                                                  LDAP server is encrypted.</p>
</li>

                                        </ul>
<p class="p">Default is false. </p>
</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">userBaseDn</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Base DN under which user accounts are located. </td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">userRdnAttribute</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Name of the username attribute. Default is uid.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">userIdAttribute</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Name of the user ID attribute. Default is uid.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">userPasswordAttribute</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Name of the attribute where the user password is stored.
                                        Default is userPassword.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">userObjectClass</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Name of the user object class. Default is
                                        inetOrgPerson.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">roleBaseDn</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Base DN to search for role membership. </td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">roleNameAttribute</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Name of the attribute for role names. Default is
                                        roleName.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">roleMemberAttribute</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Name of the role attribute for user names. Default is
                                        Member. </td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">roleObjectClass</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Role object class. Default is groupOfNames.</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="30%" headers="d115608e161 ">roleFilter</td>

                                    <td class="entry" valign="top" width="70%" headers="d115608e164 ">Specifies whether LDAP group members are determined by DN
                                        or uid. Enter one of the following values:<ul class="ul" id="task_tjw_3ss_5x__ul_rtd_4fp_cy">
                                            <li class="li"><samp class="ph codeph">"member={dn}"</samp> - Use when LDAP
                                                groups list members by full DN. </li>

                                            <li class="li"><samp class="ph codeph">"memberUid={user}"</samp> - Use when LDAP
                                                groups list members by uid.</li>

                                        </ul>
<p class="p">Default is DN.</p>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>
</div>
            </li>
</ol>

        <div class="section result">
           
            <p class="p">Let's look at an example <samp class="ph codeph">ldap-login.conf</samp> file and see how <span class="ph">Data
                  Collector</span> uses the LDAP connection information to authenticate LDAP users.</p>

            <p class="p">The following example shows a configured <samp class="ph codeph">ldap-login.conf</samp> file:</p>

            <pre class="pre codeblock">ldap {
  com.streamsets.datacollector.http.LdapLoginModule required
  debug="true"
  useLdaps="true"
  contextFactory="com.sun.jndi.ldap.LdapCtxFactory"
  hostname="server1"
  port="636"
  bindDn="cn=admin,dc=example,dc=net"
  bindPassword="@ldap-bind-password.txt@"
  authenticationMethod="simple"
  forceBindingLogin="true"
  userBaseDn="ou=users,dc=example,dc=net"
  userRdnAttribute="cn"
  userIdAttribute="uid"
  userPasswordAttribute="userPassword"
  userObjectClass="inetOrgPerson"
  roleBaseDn="ou=groups,dc=example,dc=net"
  roleNameAttribute="cn"
  roleMemberAttribute="member"
  roleObjectClass="groupOfNames"
  roleFilter="member={dn}";
}; </pre>

            <p class="p">When an LDAP user logs into <span class="ph">Data
                  Collector</span>, <span class="ph">Data
                  Collector</span> uses the connection information in the <samp class="ph codeph">ldap-login.conf</samp> file to
                authenticate the user. <span class="ph">Data
                  Collector</span>  completes the following steps to authenticate the LDAP user:</p>

            <ol class="ol" id="task_tjw_3ss_5x__ol_bwq_bl1_vx">
                <li class="li">Checks if the user account is registered in the configured LDAP server by
                    sending the following query to the LDAP
                        server:<pre class="pre codeblock">ldapsearch -LLL -H ldap://&lt;hostname&gt;:&lt;port&gt; -x -D &lt;bindDn&gt; -w &lt;bindPassword&gt; -b &lt;userBaseDn&gt; (&amp;(objectClass=&lt;userObjectClass&gt;)(&lt;userIdAttribute&gt;=username)</pre>
<p class="p">For
                        example, let's use the sample <samp class="ph codeph">ldap-login.conf</samp> file
                        configured above, assume that the password defined in
                            <samp class="ph codeph">ldap-bind-password.txt</samp> is "password", and assume that a
                        user logs in to <span class="ph">Data
                  Collector</span> with the username of <samp class="ph codeph">jdoe</samp>. <span class="ph">Data
                  Collector</span> sends the following query to the LDAP
                        server:</p>
<pre class="pre codeblock">ldapsearch -LLL -H ldap://server1:636 -x -D "cn=admin,dc=example,dc=net" -w password -b "ou=users,dc=example,dc=net" (&amp;(objectClass=inetOrgPerson)(uid=jdoe)</pre>
<p class="p">If
                        the user account doesn't exist, <span class="ph">Data
                  Collector</span> fails the authentication. If the user account exists, <span class="ph">Data
                  Collector</span> continues with the next authentication step.</p>
</li>

                <li class="li">Checks which LDAP group the user account belongs to by sending the following
                    query to the LDAP
                        server:<pre class="pre codeblock">ldapsearch -LLL -H ldap://&lt;hostname&gt;:&lt;port&gt; -x -D &lt;bindDn&gt; -w &lt;bindPassword&gt; -b &lt;roleBaseDn&gt; (&amp;(objectClass=&lt;roleObjectClass&gt;)(member={dn})</pre>
<p class="p">For
                        example, using the sample <samp class="ph codeph">ldap-login.conf</samp> file configured
                        above, <span class="ph">Data
                  Collector</span> sends the following query to the LDAP
                        server:</p>
<pre class="pre codeblock">ldapsearch -LLL -H ldap://server1:636 -x -D "cn=admin,dc=example,dc=net" -w password -b "ou=groups,dc=example,dc=net" (&amp;(objectClass=groupOfNames)(member="cn=jdoe, ou=users,dc=example,dc=net")</pre>
<p class="p">The
                        LDAP server returns the names of the LDAP groups that the user belongs to.
                            <span class="ph">Data
                  Collector</span> uses the group names to determine the <span class="ph">Data
                  Collector</span> roles mapped to the LDAP groups, as explained in our next configuration
                        step.</p>
</li>

            </ol>

        </div>

    </div>

</div>
<div class="topic concept nested2" id="concept_x3x_lts_5x">
 <h3 class="title topictitle3">Step 2. Map LDAP Groups to Data Collector Roles</h3>

 
 <div class="body conbody"><p class="shortdesc"><span class="ph">Data
                  Collector</span>
        roles determine the tasks that a user can perform. You map LDAP groups to <span class="ph">Data
                  Collector</span> roles.
        An authenticated user account that belongs to that LDAP group can complete the tasks
        determined by the mapped role.</p>

  <p class="p">In the <span class="ph">Data
                  Collector</span>
            configuration file, <samp class="ph codeph">$SDC_CONF/sdc.properties</samp>, configure the
                <span class="ph uicontrol">http.authentication.ldap.role.mapping</span> property to map LDAP
            groups to <span class="ph">Data
                  Collector</span>
            roles.</p>

        <p class="p"><span class="ph">Data
                  Collector</span>
            provides the following roles: </p>

        
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="concept_x3x_lts_5x__table_x1c_kwy_5x" class="table" frame="border" border="1" rules="all">
                
                
                <thead class="thead" align="left">
                    <tr class="row">
                        <th class="entry" valign="top" width="12.5%" id="d115608e554">Role</th>

                        <th class="entry" valign="top" width="87.5%" id="d115608e557">Description</th>

                    </tr>

                </thead>

                <tbody class="tbody">
                    <tr class="row">
                        <td class="entry" valign="top" width="12.5%" headers="d115608e554 ">admin</td>

                        <td class="entry" valign="top" width="87.5%" headers="d115608e557 ">Perform any <span class="ph">Data
                  Collector</span> task. </td>

                    </tr>

                    <tr class="row">
                        <td class="entry" valign="top" width="12.5%" headers="d115608e554 ">manager</td>

                        <td class="entry" valign="top" width="87.5%" headers="d115608e557 ">Manage pipelines. As a manager, users can start and stop pipelines,
       monitor pipelines, configure and reset alerts, and review snapshots.
       Users cannot configure pipelines or preview data.</td>

                    </tr>

                    <tr class="row">
                        <td class="entry" valign="top" width="12.5%" headers="d115608e554 ">creator</td>

                        <td class="entry" valign="top" width="87.5%" headers="d115608e557 ">Configure pipelines. As a creator, users can configure pipelines and
       alerts, preview data, and monitor the pipeline. Users cannot review
       snapshots or reset alerts.</td>

                    </tr>

                    <tr class="row">
                        <td class="entry" valign="top" width="12.5%" headers="d115608e554 ">guest</td>

                        <td class="entry" valign="top" width="87.5%" headers="d115608e557 ">Read-only access. As a guest, users can view pipeline and alert
       configuration, view general monitoring and log information. Users cannot
       preview data or review snapshots, or configure pipelines or
       alerts.</td>

                    </tr>

                </tbody>

            </table>
</div>

     <div class="p">You can map multiple roles to the same group or vice versa. Use a semicolon to separate LDAP
            groups and commas to separate <span class="ph">Data
                  Collector</span>
            roles, as
            follows:<pre class="pre codeblock">&lt;ldap group&gt;:&lt;SDC role&gt;,&lt;additional SDC role&gt;,&lt;additional SDC role&gt;);&lt;ldap group&gt;:&lt;SDC role&gt;,&lt;additional SDC role&gt;... </pre>
</div>

        <p class="p">When you have finished mapping LDAP groups to roles, restart <span class="ph">Data
                  Collector</span> to
            enable the changes to the configuration file.</p>

     <div class="p">The following example maps the DEV LDAP group to the creator role, the OPS LDAP group to the
            manager role, and the SUPER LDAP group to both creator and
            manager:<pre class="pre codeblock">DEV:creator;OPS:manager;SUPER:creator,manager</pre>
</div>

 </div>

</div>
<div class="topic concept nested2" id="concept_o4n_gvs_5x">
 <h3 class="title topictitle3">Step 3. Configure Multiple LDAP Servers (Optional)</h3>

 
 <div class="body conbody"><p class="shortdesc">If your organization has multiple LDAP servers, you can configure <span class="ph">Data
                  Collector</span> to
        connect to each of the servers.</p>

        <p class="p">The steps that you complete to configure multiple LDAP servers depend on the following
            installation types:</p>

        <dl class="dl">
            
                <dt class="dt dlterm">Installation from the tarball, RPM package, or Docker Hub</dt>

                <dd class="dd">To configure multiple LDAP servers, simply configure the connection information
                    for the additional LDAP servers in the
                        <samp class="ph codeph">$SDC_CONF/ldap-login.conf</samp>. Then, restart <span class="ph">Data
                  Collector</span> to enable the changes.</dd>

            
        </dl>

        <dl class="dl">
            
                <dt class="dt dlterm">Cloudera Manager installation</dt>

                <dd class="dd">For a Cloudera Manager installation, configure the connection information for
                    the additional LDAP servers in an advanced configuration snippet - or safety
                    valve - within Cloudera Manager.</dd>

                <dd class="dd">In Cloudera Manager, select the StreamSets service, then click
                        <span class="ph uicontrol">Configuration</span>. Select <span class="ph uicontrol">Use Safety Valve to Edit LDAP
                        Information</span>, and then configure the connection information for
                    all of the LDAP servers in the <span class="ph uicontrol">Data Collector Advanced Configuration
                        Snippet for ldap.login.conf</span> safety valve. </dd>

                <dd class="dd">When you configure multiple LDAP servers in the safety valve, Cloudera Manager
                    ignores all values entered for the <samp class="ph codeph">ldap.*</samp> properties in the
                        <span class="ph uicontrol">Configuration</span> tab.</dd>

            
        </dl>

        <p class="p">Use the following guidelines when configuring multiple LDAP servers:</p>

        <ul class="ul" id="concept_o4n_gvs_5x__ul_dq5_rvs_5x">
            <li class="li">The LDAP user account used to log in to <span class="ph">Data
                  Collector</span> must be registered in at least one of the configured LDAP servers to be
                authenticated.</li>

            <li class="li">If the LDAP user accounts belong to different LDAP groups in each LDAP server,
                include all of the group names when you map LDAP groups to <span class="ph">Data
                  Collector</span> roles in the <samp class="ph codeph">$SDC_CONF/sdc.properties</samp> file.</li>

            <li class="li">If the additional LDAP servers use different passwords for bindDN - the root
                distinguished name (DN) for the connection - then directly define the passwords in
                the bindPassword property. </li>

        </ul>

        <div class="note note"><span class="notetitle">Note:</span> When you configure multiple LDAP servers, <span class="ph">Data
                  Collector</span>
            attempts to connect to each server in the order listed in the
                <samp class="ph codeph">ldap-login.conf</samp> file. If <span class="ph">Data
                  Collector</span>
            successfully authenticates the user account in one of the LDAP servers, <span class="ph">Data
                  Collector</span>
            still continues to authenticate with the remaining LDAP servers. This can cause the <span class="ph">Data
                  Collector</span>
            log file to include login failure error messages. You can ignore these error
            messages.</div>

        <p class="p">The following example shows an <span class="keyword cmdname">ldap-login.conf</span> file configured to
            connect to two LDAP servers, server1 and server2. Each server uses the same password for
            bindDN:</p>
<pre class="pre codeblock">ldap {
  com.streamsets.datacollector.http.LdapLoginModule required
  debug="true"
  useLdaps="false"
  contextFactory="com.sun.jndi.ldap.LdapCtxFactory"
  hostname="server1" 
  port="389"                 
  bindDn="*******"
  bindPassword="@ldap-bind-password.txt@"  
  authenticationMethod="simple"
  forceBindingLogin="true"
  userBaseDn="ou=People,dc=example,dc=org"
  userRdnAttribute="uid"
  userIdAttribute="uid"
  userPasswordAttribute="userPassword"
  userObjectClass="inetOrgPerson"
  roleBaseDn="ou=Groups,dc=example,dc=org"
  roleNameAttribute="cn"
  roleMemberAttribute="member"
  roleObjectClass="groupOfNames"
  roleFilter="member={dn}";


  com.streamsets.datacollector.http.LdapLoginModule required
  debug="true"
  useLdaps="false"
  contextFactory="com.sun.jndi.ldap.LdapCtxFactory"
  hostname="server2" 
  port="389"                
  bindDn="*******"
  bindPassword="@ldap-bind-password.txt@"  
  authenticationMethod="simple"
  forceBindingLogin="true"
  userBaseDn="ou=People,dc=example,dc=org"
  userRdnAttribute="uid"
  userIdAttribute="uid"
  userPasswordAttribute="userPassword"
  userObjectClass="inetOrgPerson"
  roleBaseDn="ou=Groups,dc=example,dc=org"
  roleNameAttribute="cn"
  roleMemberAttribute="member"
  roleObjectClass="groupOfNames"
  roleFilter="member={dn}";
};</pre>

 </div>

</div>
<div class="topic concept nested2" id="concept_fyr_dkv_1x">
 <h3 class="title topictitle3">Step 4. Enable LDAP Authentication for MapR Stages</h3>

 
 <div class="body conbody"><p class="shortdesc">To use MapR stages with a <span class="ph">Data
                  Collector</span>
        configured to use LDAP authentication, you must perform an additional step after configuring
        LDAP authentication.</p>

  <p class="p">The MapR distribution for
            Hadoop uses the Java Authentication and Authorization Service (JAAS) to control security
            features. The <samp class="ph codeph">$MAPR_HOME/conf/mapr.login.conf</samp> file specifies
            configuration parameters for JAAS.</p>

        <p class="p"><span class="ph">Data
                  Collector</span>
            expects LDAP configuration to be in the JAAS configuration file
                <samp class="ph codeph">$SDC_CONF/ldap-login.conf</samp> and overrides the
                <samp class="ph codeph">java.security.auth.login.config</samp> system property to point to this
            file.</p>

        <p class="p">To avoid this conflict, copy the contents of the
                <samp class="ph codeph">$MAPR_HOME/conf/mapr.login.conf</samp> file into the
                <samp class="ph codeph">$SDC_CONF/ldap-login.conf</samp> file after you configure the LDAP
            connection information in the <samp class="ph codeph">ldap-login.conf</samp> file.</p>

        <div class="p">For example, use the following command to append the contents of the
                <samp class="ph codeph">mapr.login.conf</samp> file to the end of the
                <samp class="ph codeph">ldap-login.conf</samp>
            file:<pre class="pre codeblock">cat $MAPR_HOME/conf/mapr.login.conf &gt;&gt; $SDC_CONF/ldap-login.conf</pre>
</div>

 </div>

</div>
</div>
<div class="topic concept nested1" id="concept_wgy_rxt_5x">
 <h2 class="title topictitle2">Configuring File-Based Authentication</h2>

 
 <div class="body conbody"><p class="shortdesc">If your organization does not use LDAP, configure <span class="ph">Data
                  Collector</span> to use
        the default file-based authentication. </p>

  <p class="p">To configure file-based authentication, perform the following tasks:</p>

        <ol class="ol" id="concept_wgy_rxt_5x__ol_by2_dyt_5x">
            <li class="li">Configure file authentication properties.</li>

            <li class="li">Configure <span class="ph">Data
                  Collector</span> users and roles.</li>

        </ol>

 </div>

<div class="topic task nested2" id="task_wh3_tdv_5x">
    <h3 class="title topictitle3">Step 1. Configure File Authentication Properties</h3>

    
    <div class="body taskbody"><p class="shortdesc">Configure file authentication properties in the <span class="ph">Data
                  Collector</span>
        configuration file, <samp class="ph codeph">$SDC_CONF/sdc.properties</samp>. </p>

        <div class="section context">When you use file authentication, you can use the Basic, Digest, or Form type. By
            default, <span class="ph">Data
                  Collector</span>
            uses file authentication and uses the Form file authentication type. </div>

        <ol class="ol steps"><li class="li step stepexpand">
                <span class="ph cmd">In the <span class="ph">Data
                  Collector</span> configuration file, <samp class="ph codeph">$SDC_CONF/sdc.properties</samp>, enable
                    file-based authentication by setting the
                        <span class="ph uicontrol">http.authentication.login.module</span> property to
                        <span class="ph uicontrol">file</span>.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Define the file authentication type by setting the
                        <span class="ph uicontrol">http.authentication</span> property to
                        <span class="ph uicontrol">basic</span>, <span class="ph uicontrol">digest</span>, or
                        <span class="ph uicontrol">form</span>.</span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">Specify whether <span class="ph">Data
                  Collector</span> checks the permissions for the associated realm.properties file for the type
                    of authentication that you use. Set the
                        <span class="ph uicontrol">http.realm.file.permission.check</span> property to one of
                    the following values:</span>
                <ul class="ul choices" id="task_wh3_tdv_5x__choices_otb_kgv_5x">
                    <li class="li choice"><span class="ph uicontrol">true</span> to ensure that the realm.properties file
                        allows access only to the owner.</li>

                    <li class="li choice"><span class="ph uicontrol">false</span> to skip the permission check.</li>

                </ul>

                <div class="itemgroup info">You'll use the realm.properties file in the next step, when you configure <span class="ph">Data
                  Collector</span> users and roles.</div>
            </li>
</ol>

    </div>

</div>
<div class="topic task nested2" id="task_nsz_lp4_1r">
    <h3 class="title topictitle3">Step 2. Configure Users and Roles</h3>

    
    <div class="body taskbody"><p class="shortdesc">For file-based authentication, <span class="ph">Data
                  Collector</span>
        provides a default user account based on each role. You can change or remove these accounts.
        You can also create new user accounts. For increased security, change the passwords for the
        default accounts. </p>

        <div class="section context">
            <p class="p"><span class="ph">Data
                  Collector</span> provides the following roles and default user accounts: </p>

            
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_nsz_lp4_1r__table_x3c_kwy_7x" class="table" frame="border" border="1" rules="all">
                    
                    
                    
                    <thead class="thead" align="left">
                        <tr class="row">
                            <th class="entry" valign="top" width="14.285714285714285%" id="d115608e996">Role</th>

                            <th class="entry" valign="top" width="57.14285714285714%" id="d115608e999">Description</th>

                            <th class="entry" valign="top" width="28.57142857142857%" id="d115608e1002">Default User Login</th>

                        </tr>

                    </thead>

                    <tbody class="tbody">
                        <tr class="row">
                            <td class="entry" valign="top" width="14.285714285714285%" headers="d115608e996 ">admin</td>

                            <td class="entry" valign="top" width="57.14285714285714%" headers="d115608e999 ">Perform any <span class="ph">Data
                  Collector</span> task. </td>

                            <td class="entry" valign="top" width="28.57142857142857%" headers="d115608e1002 ">Default login is <samp class="ph codeph">admin</samp> /
                                <samp class="ph codeph">admin</samp>.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="14.285714285714285%" headers="d115608e996 ">manager</td>

                            <td class="entry" valign="top" width="57.14285714285714%" headers="d115608e999 ">Manage pipelines. As a manager, users can start and stop pipelines,
       monitor pipelines, configure and reset alerts, and review snapshots.
       Users cannot configure pipelines or preview data.</td>

                            <td class="entry" valign="top" width="28.57142857142857%" headers="d115608e1002 ">Default login is <samp class="ph codeph">manager</samp> /
                                    <samp class="ph codeph">manager</samp>.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="14.285714285714285%" headers="d115608e996 ">creator</td>

                            <td class="entry" valign="top" width="57.14285714285714%" headers="d115608e999 ">Configure pipelines. As a creator, users can configure pipelines and
       alerts, preview data, and monitor the pipeline. Users cannot review
       snapshots or reset alerts.</td>

                            <td class="entry" valign="top" width="28.57142857142857%" headers="d115608e1002 ">Default login is <samp class="ph codeph">creator</samp> /
                                    <samp class="ph codeph">creator</samp>.</td>

                        </tr>

                        <tr class="row">
                            <td class="entry" valign="top" width="14.285714285714285%" headers="d115608e996 ">guest</td>

                            <td class="entry" valign="top" width="57.14285714285714%" headers="d115608e999 ">Read-only access. As a guest, users can view pipeline and alert
       configuration, view general monitoring and log information. Users cannot
       preview data or review snapshots, or configure pipelines or
       alerts.</td>

                            <td class="entry" valign="top" width="28.57142857142857%" headers="d115608e1002 ">Default login is <samp class="ph codeph">guest</samp> /
                                <samp class="ph codeph">guest</samp>.</td>

                        </tr>

                    </tbody>

                </table>
</div>

            <p class="p">Configure additional users in the properties file for the type of authentication that
                you use. For example, if you use basic authentication, use the
                    <samp class="ph codeph">basic-realm.properties</samp> file.</p>

            <p class="p">To hash login information, you can use an md5 program such as md5 on Mac OS X or
                md5sum on Linux. </p>

            <div class="p">For basic and form authentication, hash the password alone. For example:
                <pre class="pre codeblock">echo -n "&lt;password&gt;" | md5</pre>
</div>

            <p class="p">For digest authentication, hash the combination of &lt;user
                name&gt;:&lt;realm&gt;:&lt;password&gt;, where &lt;realm&gt; is the authentication type. </p>

            <div class="p">For example, you might use the following
                command:<pre class="pre codeblock">echo -n "&lt;user name&gt;:&lt;realm&gt;:&lt;password&gt;" | md5</pre>
</div>

            <p class="p">as follows:</p>

            <div class="p">
                <pre class="pre codeblock">echo -n "jdoe:digest-realm:JdoePass" | md5</pre>

            </div>

        </div>

        <ol class="ol steps" id="task_nsz_lp4_1r__steps_ody_3q4_1r"><li class="li step stepexpand">
                <span class="ph cmd">To configure a user, modify the properties file for the type of authentication
                    that you use. </span>
                <div class="itemgroup info">The file name is
                        <span class="ph filepath">$SDC_CONF/&lt;authentication&gt;-realm.properties</span>. </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">For each new user, add a user definition using the following format:</span>
                <div class="itemgroup info">
                    <pre class="pre codeblock">&lt;user name&gt;: MD5:&lt;md5-text&gt;, user, &lt;role&gt; [, &lt;additional role&gt;, &lt;additional role&gt;...]</pre>

                </div>
                <div class="itemgroup info">
                    <div class="note note"><span class="notetitle">Note:</span> Assign one or more roles to each user. Be sure to include "user" in every
                        user definition.</div>

                </div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">To make the new users available, restart <span class="ph">Data
                  Collector</span>.</span>
            </li>
</ol>

    </div>

</div>
</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Install_Config/Install_Config_title.html" title="Installation and Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Installation and Configuration</span></a></span>  </div><div class="footer"><!-- SDC google analytics --><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60917135-3', 'auto');
  ga('send', 'pageview');
</script></div>
</body>
</html>