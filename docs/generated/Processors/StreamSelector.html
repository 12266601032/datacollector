
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="The Stream Selector passes data to streams based on conditions. When you configure a condition, the Stream Selector creates an output for the stage that you connect to a downstream stage. The Stream ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="concept"></meta><meta name="DC.Title" content="Stream Selector"></meta><meta name="abstract" content="The Stream Selector passes data to streams based on conditions."></meta><meta name="description" content="The Stream Selector passes data to streams based on conditions."></meta><meta name="DC.Relation" scheme="URI" content="../Processors/Processors_title.html"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="concept_tqv_t5r_wq"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Stream Selector</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../skin.css"></link><script type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../Processors/Processors_title.html" title="Processors">Processors</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../Processors/Processors_title.html" title="Processors"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Processors</span></a></span>  </div></td></tr></tbody></table>
<div class="nested0" id="concept_tqv_t5r_wq">
 <h1 class="title topictitle1">Stream Selector</h1>

 
 <div class="body conbody"><p class="shortdesc">The Stream Selector passes data to streams based on conditions. </p>

    <p class="p">When you configure a condition, the Stream Selector
      creates an output for the stage that you connect to a downstream stage. The Stream Selector
      passes a record to all streams where the record matches the condition. </p>

    <div class="p">For example, you create the following conditions:
      <pre class="pre codeblock">${record:value("/State")==CA}
${record:value("/ID")==null}</pre>
</div>

    <p class="p">When you run the pipeline, records from California pass to Stream 1, records with missing IDs
      pass to Stream 2 and any record from California with a missing ID passes to both streams. </p>

  </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_oy4_tbf_cr">
 <h2 class="title topictitle2">Sample Conditions for Streams</h2>

 
 <div class="body conbody"><p class="shortdesc">A condition defines the data that passes to the associated stream. All records that meet
  the condition passes to the stream. Use the expression language to define conditions. </p>

  <p class="p">When you define a condition, you typically base it on values in one or more fields in the
   record. </p>

  <div class="section"><h3 class="title sectiontitle">Sample Conditions</h3>
   
   <div class="p">The following conditions are common scenarios that you might adapt:<dl class="dl">
     
      <dt class="dt dlterm"><samp class="ph codeph">${str:contains(record:value("/line"), "ERROR")}</samp></dt>

      <dd class="dd">Checks the data in the Line field for the text, "ERROR". </dd>

      <dd class="dd">If the field contains "ERROR", the record passes to the stream. </dd>

     
     
      <dt class="dt dlterm"><samp class="ph codeph">${str:contains(str:toLower(record:value("/message")), "fatal")</samp></dt>

      <dd class="dd">Lowercases the string values in the Message field, and then checks the data in the field
       for "fatal". </dd>

      <dd class="dd">If the field contains "fatal", the record passes to the stream. </dd>

     
     
      <dt class="dt dlterm"><samp class="ph codeph">${record:value("/priority") &gt; 1}</samp></dt>

      <dd class="dd">If the value in the Priority field is greater than one, the record passes to the stream.
      </dd>

     
     
      <dt class="dt dlterm"><samp class="ph codeph">${record:value("/AccountID")==null}</samp></dt>

      <dd class="dd">If the AccountID field is null, the record passes to the stream.</dd>

     
    </dl>
</div>

  </div>

 </div>

 <div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br></br>
<div class="related_link"><a class="navheader_parent_path" href="ConfiguringExpressionsConditions.html#concept_ofb_1cm_xq" title="Use the expression language to configure expressions and conditions. You can configure expressions in the Expression Evaluator. You can configure conditions in the Stream Selector.">Configuring Expressions and Conditions</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../Expression_Language/ExpressionLanguage_overview.html#concept_p54_4kl_vq" title="The StreamSets expression language enables you to create expressions that evaluate or modify data. The StreamSets expression language is based on the JSP 2.0 Expression Language.">Expression Language</a></div>
</div>
</div>
</div>
<div class="topic concept nested1" id="concept_sn5_5kx_wq">
 <h2 class="title topictitle2">Unmatching Record Handling</h2>

 
 <div class="body conbody"><p class="shortdesc">When a record does not match any condition, the Stream Selector can use the error
  handling for unmatched records or you can configure a default stream that accepts the unmatched
  records:</p>

  <div class="p">
   <dl class="dl">
    
     <dt class="dt dlterm">Error handling</dt>

     <dd class="dd">The Unmatched Record Handling property determines how the
      Stream Selector handles records that do not match any conditions. The Stream Selector can
      perform one of the following actions:<ul class="ul" id="concept_sn5_5kx_wq__ul_jhg_fkx_wq">
       <li class="li">Discard the record.</li>

       <li class="li">Send the error to the pipeline for error handling.</li>

       <li class="li">Stop the pipeline.</li>

      </ul>
</dd>

    
    
     <dt class="dt dlterm">Default stream</dt>

     <dd class="dd">You can create a default stream to capture records that do not match other conditions. When
      you create a default stream, you connect the output to a branch in the pipeline. </dd>

     <dd class="dd">You can configure the branch to perform additional processing or write it directly to a
      destination. You might write the data to a real destination or use the Trash destination. </dd>

     <dd class="dd">When you use the Trash destination, the pipeline discards the records. But unlike
      discarding the record as part of error handling, the <span class="ph">Data
                  Collector</span> keeps
      metrics for the Trash destination so you can view the number of records being discarded and
      you can create alerts around this metric. </dd>

    
   </dl>

  </div>

  <p class="p">
   
  </p>

  <p class="p"> </p>

 </div>

</div>
<div class="topic task nested1" id="task_iss_2zx_wq">
    <h2 class="title topictitle2">Configuring the Stream Selector</h2>

    <div class="body taskbody">
        <div class="section context">
            <p class="p">Use
                a Stream Selector to route data to different streams based on conditions.</p>

        </div>

        <ol class="ol steps" id="task_iss_2zx_wq__steps_tsx_3gf_xq"><li class="li step stepexpand">
                <span class="ph cmd">In the Properties panel, optionally enter a name and description for the stage.
                </span>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">For <span class="ph uicontrol">Required Fields</span>, enter any fields that you want to
                    require data. <a class="xref" href="../Pipeline_Configuration/RequiredFields.html#concept_dnj_bkm_vq" title="You can configure required fields for any processor and most destination stages. A required field must exist in a record to allow the record to enter the stage for processing. When a record does not include a required field, the stage passes the record to the pipeline for error handling.">
                        <img class="image" id="task_iss_2zx_wq__d1648e167" src="../Reusable_Content/../Graphics/icon_moreInfo.png" height="14" width="14"></img></a></span>
                <div class="itemgroup info">You might include any field that the processor uses.</div>
            </li>
<li class="li step stepexpand">
                <span class="ph cmd">On the <span class="ph uicontrol">Conditions</span> tab, configure the following
                    properties:</span>
                <div class="itemgroup info">
                    
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="task_iss_2zx_wq__table_ecr_dwf_br" class="table" frame="border" border="1" rules="all">
                            
                            
                            <thead class="thead" align="left">
                                <tr class="row">
                                    <th class="entry" valign="top" width="31.446540880503143%" id="d19014e283">Stream Selector Property</th>

                                    <th class="entry" valign="top" width="68.55345911949686%" id="d19014e286">Description</th>

                                </tr>

                            </thead>

                            <tbody class="tbody">
                                <tr class="row">
                                    <td class="entry" valign="top" width="31.446540880503143%" headers="d19014e283 ">Condition <a class="xref" href="StreamSelector_Conditions.html#task_mj5_vjf_xq" title="Configure a condition for each stream of data that you want to route. The Stream Selector passes all data that matches the condition to the stream.">
                                            <img class="image" src="../Graphics/icon_moreInfo.png" height="14" width="14"></img></a></td>

                                    <td class="entry" valign="top" width="68.55345911949686%" headers="d19014e286 ">Condition to stream data to this output. Click the
                                            <span class="ph uicontrol">Add</span> icon to create additional
                                        conditions and corresponding output locations. <p class="p">To define
                                            a default stream to capture unmatched records, add a
                                            condition with the following expression:
                                        ${default}.</p>
</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="31.446540880503143%" headers="d19014e283 ">Constants <a class="xref" href="ConfiguringExpressionsConditions.html#task_ogd_zj3_wq" title="You can define constants that you can reuse within a processor. Define a constant when you have a value that you want use more than once in the processor or that you want to be able to update easily. You can define constants in the Expression Evaluator and Stream Selector processors.">
                                            <img class="image" id="task_iss_2zx_wq__image_c4p_p5v_yq" src="../Graphics/icon_moreInfo.png" height="14" width="14"></img></a></td>

                                    <td class="entry" valign="top" width="68.55345911949686%" headers="d19014e286 ">Represents a constant in conditions. Define a constant to
                                        easily reuse it in the stage or to easily update the
                                        constant value. <p class="p">To define a constant, click the
                                                <span class="ph uicontrol">Add</span> icon, and then enter a
                                                <span class="ph uicontrol">Name</span> and
                                                <span class="ph uicontrol">Value</span> for the constant.
                                        </p>
</td>

                                </tr>

                                <tr class="row">
                                    <td class="entry" valign="top" width="31.446540880503143%" headers="d19014e283 ">Unmatched Record Handling <a class="xref" href="StreamSelector.html#concept_sn5_5kx_wq" title="When a record does not match any condition, the Stream Selector can use the error handling for unmatched records or you can configure a default stream that accepts the unmatched records:">
                                            <img class="image" id="task_iss_2zx_wq__image_eld_51f_cr" src="../Graphics/icon_moreInfo.png" height="14" width="14"></img></a></td>

                                    <td class="entry" valign="top" width="68.55345911949686%" headers="d19014e286 ">Determines how to handle records that do not match any
                                        condition: <ul class="ul" id="task_iss_2zx_wq__ul_uxy_r3f_xq">
                                            <li class="li">Drop Record - Drops the record from the pipeline. </li>

                                            <li class="li">Record to Error - Sends the record to the pipeline
                                                for error handling. </li>

                                            <li class="li">Fail Pipeline - Stops the pipeline.</li>

                                        </ul>
</td>

                                </tr>

                            </tbody>

                        </table>
</div>

                </div>
            </li>
</ol>

    </div>

    <div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br></br>
<div class="related_link"><a class="navheader_parent_path" href="ConfiguringExpressionsConditions.html#concept_ofb_1cm_xq" title="Use the expression language to configure expressions and conditions. You can configure expressions in the Expression Evaluator. You can configure conditions in the Stream Selector.">Configuring Expressions and Conditions</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../Expression_Language/ExpressionLanguage_overview.html#concept_p54_4kl_vq" title="The StreamSets expression language enables you to create expressions that evaluate or modify data. The StreamSets expression language is based on the JSP 2.0 Expression Language.">Expression Language</a></div>
</div>
</div>
</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Processors/Processors_title.html" title="Processors"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Processors</span></a></span>  </div><div class="footer">WebHelp output generated by<a href="http://www.oxygenxml.com" target="_blank"><span class="oXygenLogo"><img src="../oxygen-webhelp/resources/img/LogoOxygen100x22.png" alt="Oxygen"></img></span><span class="xmlauthor">XML Author</span></a></div>
</body>
</html>