
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="Use the expression language to configure expressions and conditions in processors, such as the Expression Evaluator or Stream Selector. Some destination properties also require the expression ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="concept"></meta><meta name="DC.Title" content="Expression Configuration"></meta><meta name="DC.Relation" scheme="URI" content="../Pipeline_Configuration/PipelineConfiguration_title.html"></meta><meta name="DC.Relation" scheme="URI" content="../Advanced_Config/RuntimeProperties.html#concept_fjx_g31_1s"></meta><meta name="DC.Relation" scheme="URI" content="PipelineProperties.html#concept_rjh_ntz_qr"></meta><meta name="DC.Relation" scheme="URI" content="../Expression_Language/ExpressionLanguage_overview.html#concept_p54_4kl_vq"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="concept_ofb_1cm_xq"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Expression Configuration</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../skin.css"></link><script type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../Pipeline_Configuration/PipelineConfiguration_title.html" title="Pipeline Configuration">Pipeline Configuration</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../Pipeline_Configuration/PipelineConfiguration_title.html" title="Pipeline Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Pipeline Configuration</span></a></span>  </div></td></tr></tbody></table>
<div class="nested0" id="concept_ofb_1cm_xq">
 <h1 class="title topictitle1">Expression Configuration</h1>

 <div class="body conbody">
    <p class="p">Use the expression language to configure expressions and conditions in
                  processors, such as the Expression Evaluator or Stream Selector. Some destination
                  properties also require the expression language, such as the directory template
                  for Hadoop FS. </p>
<p class="p">Optionally, you can use the expression language to define any stage or
                  pipeline property that represents a numeric or string value. This allows you to
                  use constants or runtime properties throughout the pipeline. You can use
                  expression completion determine where you can use an expression and the expression
                  elements that you can use in that location. </p>
<div class="p">You can use the following elements in an expression:<ul class="ul" id="concept_ofb_1cm_xq__d2690e215">
                        <li class="li">Constants</li>

                        <li class="li">Field names</li>

                        <li class="li">Functions</li>

                        <li class="li">Literals</li>

                        <li class="li">Operators</li>

                        <li class="li">Runtime properties</li>

                  </ul>
</div>

 </div>

  <div class="related-links"><div class="relinfo relconcepts"><strong>Related concepts</strong><br></br>
<div class="related_link"><a class="navheader_parent_path" href="../Advanced_Config/RuntimeProperties.html#concept_fjx_g31_1s" title="Runtime properties are properties that you define in a file local to the Data Collector and call from within a pipeline. With runtime properties, you can define different sets of values for different Data Collectors.">Runtime Properties</a></div>
<div class="related_link"><a class="navheader_parent_path" href="PipelineProperties.html#concept_rjh_ntz_qr" title="A pipeline constant is a constant that you define for the pipeline and that you can use in any stage in the pipeline. Define a pipeline constant when you have a constant that you want to update easily or to use more than once.">Pipeline Constants</a></div>
<div class="related_link"><a class="navheader_parent_path" href="../Expression_Language/ExpressionLanguage_overview.html#concept_p54_4kl_vq" title="Expression Language">Expression Language</a></div>
</div>
</div>
<div class="topic concept nested1" id="concept_bkb_tcm_xq">
 <h2 class="title topictitle2">Basic Syntax</h2>

 
 <div class="body conbody"><p class="shortdesc">Precede all expressions with a dollar sign and enclose them with curly brackets, as
  follows: <samp class="ph codeph">${&lt;expression&gt;}</samp>.</p>

  <p class="p">For example, to add 2
   +2, use the following syntax: ${2+2}.</p>

 </div>

</div>
<div class="topic concept nested1" id="concept_kk2_mbm_xq">
 <h2 class="title topictitle2">Using Field Names in Expressions</h2>

 
 <div class="body conbody"><p class="shortdesc">When you use a field name in an expression, use the following syntax:</p>

  <div class="p">
   <pre class="pre codeblock">${record:value("/&lt;field name&gt;")}</pre>

  </div>

  <div class="p">
   <div class="note note"><span class="notetitle">Note:</span> You can use single or double quotation marks to surround a field name.</div>

  </div>

  <p class="p">For example, the following expression concatenates the values from the DATE field with values
   from the TIME field:</p>

  <div class="p">
   <pre class="pre codeblock">${record:value('/DATE')} ${record:value('/TIME')}</pre>

  </div>

 </div>

</div>
<div class="topic concept nested1" id="concept_hjk_b4l_vq">
 <h2 class="title topictitle2">Referencing Field Names and Field Paths</h2>

 
 <div class="body conbody"><p class="shortdesc">When a pipeline is valid for preview, you can generally select fields from a list. When
                a list is not available or when you are defining a new field name, you need to use
                the appropriate format for the field name.  </p>

    <p class="p">To
                        reference a field, you specify the path of the field. A field path describes
                        a data element in a record using a syntax similar to files in directories.
                        The complexity of a field path differs based on the type of data in the
                        record:</p>

                <div class="p">
                        <dl class="dl">
                                
                                        <dt class="dt dlterm">Delimited data, simple maps or JSON objects</dt>

                                        <dd class="dd">
                                                <div class="p">With delimited data or simple JSON objects, the
                                                  fields are one level removed from the root.
                                                  Reference the field as
                                                  follows:<pre class="pre codeblock">/&lt;field name&gt;</pre>
</div>

                                                <p class="p">So, to reference a CITY field in a delimited
                                                  record, enter /CITY.</p>

                                        </dd>

                                
                                
                                        <dt class="dt dlterm">Complex maps or JSON objects</dt>

                                        <dd class="dd">
                                                <div class="p">To reference a field in a complex map or JSON
                                                  object, include the path to the field, as follows:
                                                  <pre class="pre codeblock">/&lt;path to field&gt;/&lt;field name&gt;</pre>
</div>

                                                <p class="p">For example, the following field path describes
                                                  an employeeName field several levels deep in a
                                                  JSON object:<span class="ph filepath">
                                                  /region/division/group/employeeName</span>.</p>

                                        </dd>

                                
                                
                                        <dt class="dt dlterm">Arrays or lists</dt>

                                        <dd class="dd">To reference a field in an array or list, include the
                                                index and path to the field, as
                                                follows:<pre class="pre codeblock">[&lt;index value&gt;]/&lt;path to field&gt;/&lt;field name&gt;</pre>
</dd>

                                
                                
                                        <dt class="dt dlterm">Text</dt>

                                        <dd class="dd">To reference text when a record is a line of text, use
                                                the following field name:
                                                <pre class="pre codeblock">/text</pre>
</dd>

                                
                        </dl>

                </div>

 </div>

<div class="topic concept nested2" id="concept_vqr_sqc_wr">
  <h3 class="title topictitle3">Wildcard Use for Arrays and Maps</h3>

  
  <div class="body conbody"><p class="shortdesc">In some processors, you can use the asterisk wildcard (*) as indices in an array or key
    values in a map. Use a wildcard to help define the field paths for maps and arrays. </p>

    <div class="p">You can use the asterisk wildcard as follows: <dl class="dl">
        
          <dt class="dt dlterm">[*]</dt>

          <dd class="dd">Matches all values for the specified index in an array. For example, the following
            field path represents the social security number of every employee in every
            division:<pre class="pre codeblock">/Division[*]/Employee[*]/SSN</pre>
</dd>

        
        
          <dt class="dt dlterm">/*</dt>

          <dd class="dd">Matches all values for the specified keys in a map. For example, the following field
            path represents all employee information in the first
            division:<pre class="pre codeblock">/Division[0]/Employee[*]/*</pre>
</dd>

        
      </dl>
</div>

  </div>

</div>
</div>
<div class="topic concept nested1" id="concept_tns_krz_sr">
 <h2 class="title topictitle2">Expression Completion in Properties</h2>

 <div class="body conbody">
    <p class="p">Expression completion provides a list of data types,
      constants, fields, and functions that you can use. The list includes pipeline constants when
      defined, and available fields when the pipeline is valid for data preview.</p>

    <p class="p">When an element does not display in the list, it is not a valid element at the specified
      location.</p>

  </div>

<div class="topic concept nested2" id="concept_fwj_yq5_tr">
 <h3 class="title topictitle3">Tips for Expression Completion</h3>

 
 <div class="body conbody"><p class="shortdesc">Use the following information and tips when you invoke expression
  completion:</p>

  <div class="p">
   <ol class="ol" id="concept_fwj_yq5_tr__ol_sls_br5_tr">
        <li class="li">To invoke
          expression completion, place the cursor where you want to create an expression and click
            <span class="ph uicontrol">Ctrl + Space Bar</span>.<p class="p">A list of valid expression elements displays.
            Scroll to view the entire list.</p>
<p class="p"><img class="image" id="concept_fwj_yq5_tr__image_ctc_rs5_tr" src="../Graphics/ExComp-List.png"></img></p>
<p class="p">You can invoke expression completion anywhere where you
            can use an expression.</p>
</li>

    <li class="li">Field names display at the top of the list when data preview is available. When defined,
          pipeline constants display in the list with a purple Contants icon.<p class="p">In the following
            example, Bonus is a pipeline constant:</p>
<p class="p"><img class="image" id="concept_fwj_yq5_tr__image_cvp_sdv_tr" src="../Graphics/ExComp-FieldsConstants.png"></img></p>
</li>

    <li class="li">To view more information about an element, click the element name: <p class="p"><img class="image" id="concept_fwj_yq5_tr__image_m2v_ht5_tr" src="../Graphics/ExComp-ListInfo.png"></img></p>
</li>

    <li class="li">To add an element to an expression, double-click the element name or hit
            <span class="ph uicontrol">Enter</span>. </li>

        <li class="li">You can filter the element list by typing the first few letters of the element name. </li>

    <li class="li">To view the syntax of a function, after you add the function, click within the parentheses.
       <p class="p"><img class="image" id="concept_fwj_yq5_tr__image_jq3_yw5_tr" src="../Graphics/ExComp-Syntax.png"></img></p>
</li>

   </ol>

  </div>

 </div>

</div>
</div>
<div class="topic concept nested1" id="concept_fmr_ggh_fr">
 <h2 class="title topictitle2">Data Type Coercion</h2>

 
 <div class="body conbody"><p class="shortdesc">When an expression requires, the expression language attempts implicit data type
  conversion - a.k.a. data type coercion. When coercion is not possible, the <span class="ph">Data
                  Collector</span> passes the
  error records to the stage for error handling.</p>

  <p class="p">For example, you have an Expression Evaluator stage configured to send error records to the
   pipeline for error handling, and the pipeline writes error records to a file.  The Expression
   Evaluator includes an expression that treats string data as integers. When the field includes
   integer or valid numeric data, the expression language coerces the data type. If the field
   includes a date, that record is written to the error records file.</p>

  <p class="p">To avoid coercion errors, you can use the Field Converter earlier in the pipeline to convert
   data to the appropriate data type.</p>

 </div>

</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Pipeline_Configuration/PipelineConfiguration_title.html" title="Pipeline Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Pipeline Configuration</span></a></span>  </div><div class="footer"><div> </div><!-- © <a href="http://creativecommons.org/licenses/by-nc/4.0/legalcode">CC BY-NC 4.0.</a> StreamSets, 2015. --></div>
</body>
</html>