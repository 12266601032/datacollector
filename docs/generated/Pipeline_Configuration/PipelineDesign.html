
<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
<head><meta name="description" content="When you design a pipeline, you define and link the stages that you want to use. To add stages to the canvas, you can use the stage library and connect stages manually, or you can use the Pipeline ..."></meta><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><meta name="copyright" content="(C) Copyright 2005"></meta><meta name="DC.rights.owner" content="(C) Copyright 2005"></meta><meta name="DC.Type" content="concept"></meta><meta name="DC.Title" content="Pipeline Design"></meta><meta name="abstract" content="When you design a pipeline, you define and link the stages that you want to use."></meta><meta name="description" content="When you design a pipeline, you define and link the stages that you want to use."></meta><meta name="DC.Relation" scheme="URI" content="../Pipeline_Configuration/PipelineConfiguration_title.html"></meta><meta name="DC.Format" content="XHTML"></meta><meta name="DC.Identifier" content="concept_ill_2gx_rr"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Pipeline Design</title><meta http-equiv="Content-Type" content="text/html; charset=utf-8"></meta><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../skin.css"></link><script type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.highlight-3.js"><!----></script><script type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" class="frmBody">
<table class="nav"><tbody><tr><td colspan="2"><div id="printlink"><a href="javascript:window.print();" title="Print this page"></a></div><div id="permalink"><a href="#" title="Link to this page"></a></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../Pipeline_Configuration/PipelineConfiguration_title.html" title="Pipeline Configuration">Pipeline Configuration</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../Pipeline_Configuration/PipelineConfiguration_title.html" title="Pipeline Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Pipeline Configuration</span></a></span>  </div></td></tr></tbody></table>
<div class="nested0" id="concept_ill_2gx_rr">
 <h1 class="title topictitle1">Pipeline Design</h1>

 
 <div class="body conbody"><p class="shortdesc">When you design a pipeline, you define and link the stages that you want to use. </p>

  <p class="p">To add stages to the canvas, you can use the stage library and connect stages manually, or you
   can use the Pipeline Creation Help Bar to automatically link a new stage to the pipeline.</p>

  <p class="p">To define pipeline properties, such as the delivery guarantee, constants or error handling,
   click in any unused space of the canvas. To define the properties for a stage, select the
   stage.</p>

  <p class="p">You can configure metric or data alerts on the Rules tab of the pipeline properties panel. </p>

 </div>

<div class="related-links"></div>
<div class="topic concept nested1" id="concept_ub2_zdl_br">
 <h2 class="title topictitle2">Replicating Streams</h2>

 
 <div class="body conbody"><p class="shortdesc">When you connect a stage to multiple stages, all data passes to all connected stages.
      You can configure required fields for a stage to discard records before they enter the stage,
      but by default all records are passed.</p>

  <p class="p">For example, in the following pipeline, all of the data
      from the Directory origin passes to both branches of the pipeline for different types of
      processing. But you might optionally configure required fields for the Field Splitter or Value
      Replacer to discard any records that are not needed.</p>

    <p class="p"><img class="image" id="concept_ub2_zdl_br__image_m3h_hnm_2r" src="../Graphics/ReplicatingStreams.png"></img></p>

    <p class="p">To route data based on more complex conditions, use a Stream Selector.</p>

 </div>

</div>
<div class="topic concept nested1" id="concept_w3y_cry_5q">
 <h2 class="title topictitle2">Merging Streams</h2>

 
 <div class="body conbody"><p class="shortdesc">You can merge streams of data in a pipeline by connecting two or more stages to the same
  downstream stage. When you merge streams of data, the <span class="ph">Data
                  Collector</span> channels the
  data from all streams to the same stage, but does not perform a join of records in the stream. </p>

  <p class="p">For example, in the following pipeline, the Stream Selector
   stage sends data with null values to the Value Replacer stage:</p>

  <p class="p"><img class="image" id="concept_w3y_cry_5q__image_kxc_jty_5q" src="../Graphics/MergingStreams.png"></img></p>

  <p class="p">The data from the Stream Selector default stream and all data from Value Replacer pass to
   Expression Evaluator for further processing, but in no particular order and with no record
   merging.</p>

  <div class="note note"><span class="notetitle">Note:</span> Pipeline validation does not prevent duplicate data. To avoid writing duplicate data to
   destinations, configure the pipeline logic to remove duplicate data or to prevent the generation
   of duplicate data.</div>

 </div>

</div>
<div class="topic concept nested1" id="concept_dnj_bkm_vq">
 <h2 class="title topictitle2">Required Fields</h2>

 
 <div class="body conbody"><p class="shortdesc">A required field is a field that must exist in a record to allow it into the stage for
        processing. When a record does not include a required field, the record is diverted to the
        pipeline for error handling. You can define required fields for any processor and most
        destination stages. </p>

  <p class="p"> Configure
                        required fields as part of the overall pipeline logic or to minimize
                        processing errors. For example, if a Field Hasher encodes social security
                        data in the /SSN field. To ensure all records include social security
                        numbers, you can make /SSN a required field for the stage.</p>

 </div>

</div>
<div class="topic concept nested1" id="concept_msl_yd4_fs">
 <h2 class="title topictitle2">Preconditions</h2>

 
 <div class="body conbody"><p class="shortdesc">Preconditions are expressions that you can define to determine the records that pass
  into a stage. Like required fields, if a record does not meet a precondition, it is diverted to
  the pipeline for error handling. You can define preconditions for any processor and most
  destination stages. </p>

  <p class="p">When you create more than one
      precondition in a stage, a record must pass all conditions to enter the stage. You can use
      most functions, pipeline constants, and runtime properties in preconditions. </p>

  <div class="p">Configure preconditions as part of the overall pipeline logic or  to minimize processing
   errors. For example, you might use the following expression to exclude records that originate
   from outside the United States:<pre class="pre codeblock"> ${record:value('/COUNTRY') = 'US'}</pre>
</div>

 </div>

</div>
<div class="topic concept nested1" id="concept_qkk_mwk_br">
 <h2 class="title topictitle2">SDC Record Data Format</h2>

 
 <div class="body conbody"><p class="shortdesc">SDC Record is a proprietary data format that the <span class="ph">Data
                  Collector</span> uses to
    generate error records.  The <span class="ph">Data
                  Collector</span> can also use
    the data format to read and write data. </p>

  <p class="p">Use the SDC Record data
      format to process data from another pipeline or to generate data to be processed by another
      pipeline.</p>

  <div class="p">You can use the following origins to read SDC Record data: <ul class="ul" id="concept_qkk_mwk_br__ul_ep4_r2b_wr">
    <li class="li">Directory</li>

    <li class="li">Kafka Consumer</li>

   </ul>
</div>

  <div class="p">You can use the following destinations to write SDC Record data:<ul class="ul" id="concept_qkk_mwk_br__ul_l1m_52b_wr">
        <li class="li">Flume</li>

    <li class="li">Hadoop FS</li>

    <li class="li">Kafka Producer</li>

   </ul>
</div>

 </div>

</div>
<div class="topic concept nested1" id="concept_zcg_bm4_fs">
 <h2 class="title topictitle2">Delimited Data Record Structure</h2>

 
 <div class="body conbody"><p class="shortdesc">When reading delimited data, the <span class="ph">Data
                  Collector</span>
        converts each row of delimited data to a record in List data format. To perform additional
        processing on the record, you can use the general expression language with your knowledge of
        the resulting record format or you can use delimited data functions. </p>

  <div class="p">A record
            generated from delimited data results in list with an index for the header position and
            a map with each header and associated value, as
            follows:<pre class="pre codeblock">[0] /header = &lt;first header&gt;
    /value = &lt;value for first header&gt;

[1] /header = &lt;second header&gt;
    /value = &lt;value for second header&gt;

[2] /header = &lt;third header&gt;
    /value = &lt;value for third header&gt;
.
.
.</pre>
</div>

  <p class="p">For example, the following delimited rows:</p>

  <div class="p">
   <pre class="pre codeblock"><strong class="ph b">TransactionID,Type,UserID
0003420303,04,362
0003420304,08,1008</strong></pre>

  </div>

  <div class="p">are converted to records as
   follows:<pre class="pre codeblock">[0] /header = TransactionID
    /value = 0003420303
[1] /header = Type
    /value = 04
[2] /header = UserID
    /value = 362

[0] /header = TransactionID
    /value = 0003420304
[1] /header = Type
    /value = 08
[2] /header = UserID
    /value = 1008</pre>
</div>

 </div>

<div class="topic concept nested2" id="concept_hrt_tt4_fs">
 <h3 class="title topictitle3">Processing Delimited Data</h3>

 
 <div class="body conbody"><p class="shortdesc">To process delimited data, you can use delimited data functions or standard record
  functions. </p>

  <p class="p">The expression language
   provides delimited data functions to enable easier access to record details, such as the value of
   a header or whether the record includes duplicate headers. </p>

  <p class="p">For example, you can use the <samp class="ph codeph">record:dValue('&lt;header&gt;')</samp> delimited data
      function to return the value associated with the specified header. Continuing with the example
      above, the following function returns user ID information:</p>

  <pre class="pre codeblock">${record:dValue('UserID')}</pre>

  <div class="p">With the User ID header index, you can use the <samp class="ph codeph">record:dValueAt(&lt;header
        index&gt;)</samp> function to return the same information, as
      follows:<pre class="pre codeblock">${record:dValueAt([2])</pre>
</div>

  <div class="p">But if you prefer, you can use the field path to the data with the standard record function,
        <samp class="ph codeph">record:value('&lt;field
      path&gt;')</samp>:<pre class="pre codeblock">${record:value('[2]/value&gt;')}</pre>
</div>

  <p class="p">Note that the field path references the column index and the "value" key.</p>

  <div class="p">
   <div class="note tip"><span class="tiptitle">Tip:</span> You can use the <samp class="ph codeph">record:dToMap()</samp> function to convert the record
    to a map, and then use standard functions for record processing.</div>

  </div>

  <p class="p">For the full list of delimited data record functions and their syntax, see <a class="xref" href="../Expression_Language/Functions.html#concept_s2c_q14_fs" title="When reading delimited data, the Data Collector generates records of the List data format with a map of the header and value. Use delimited data functions to process delimited data, such as returning the value associated with a header or checking for duplicate headers.">Delimited Data Functions</a>.</p>

 </div>

</div>
</div>
</div>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../Pipeline_Configuration/PipelineConfiguration_title.html" title="Pipeline Configuration"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Pipeline Configuration</span></a></span>  </div><div class="footer"><div> </div><!-- © <a href="http://creativecommons.org/licenses/by-nc/4.0/legalcode">CC BY-NC 4.0.</a> StreamSets, 2015. --></div>
</body>
</html>